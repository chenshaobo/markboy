define("question:widget/js/card/card.js",function(a,e,i){function t(a){for(var e=a.toString(),i=parseInt(e.split("").reverse().join(""),10),t=["","\u5341","\u767e","\u5343","\u4e07"],s=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],n=e.length,r="",o=i.toString().length,l=0;o>l;l++)r+=0==l&&2==n&&i%10==1?"":s[i%10],r+=i%10==0?"":t[n-l-1],i=Math.floor(i/10);return r}function s(a){var e=p.url.jsonToQuery(a);p.post("/c/oi_cv/cv",e)}function n(a){var e=a.user,i=a.imId,s=a.userName,n=a.passPhoto,r=e.iconType,o=e.sex,l=e.gradeIndex,c=t(e.gradeIndex),d=e.carefield,m=e.isFromTeam,v=e.teamName,g=e.teamId,u=(e.authTitle,e.isUserAdmin),f=e.userAdminLevel,h=e.userAdminTitle,w=e.isFamous,b=e.isMaster,k=e.goodRate||0,y=e.grAnswerNum||0,T='<div class="card-shadow line"><div class="user-card" id="user-card-'+i+'"><div class="line"><div class="grid avatar-66 mr-10"><a class="avatar-normal-a" alog-alias="qb-card-avatar" href="http://www.baidu.com/p/'+s+'?from=zhidao" target="_blank">';return T+=1==n?'<img class="avatar-normal-img" src="http://himg.bdimg.com/sys/portrait/item/'+i+'.jpg" /></a></div>':'<img class="avatar-normal-img" src="http://img.baidu.com/img/iknow/avarta/66/r'+r+"s"+o+"g"+l+'.gif" /></a></div>',T+='<div class="grid mt-5"><p class="card-name"><a href="http://www.baidu.com/p/'+s+'?from=zhidao" class="user-name f-yahei v-middle" alog-alias="qb-card-uname" target="_blank">'+s+"</a>","1"==w&&(T+='<a class="i-famous ml-5" title="\u77e5\u9053\u540d\u4eba" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==b&&(T+='<a class="i-master ml-5" title="\u77e5\u9053\u8fbe\u4eba" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==u&&(T+=0==f?'<a href="http://www.baidu.com/search/zhidao_help.html#\u5982\u4f55\u9009\u62e9\u5934\u8854" alog-action="qb-card-icon" target="_blank" class="i-user-admin-0 ml-5" title="'+h+'"></a>':1e4==f?'<a href="http://www.baidu.com/search/zhidao_help.html#\u5982\u4f55\u9009\u62e9\u5934\u8854" alog-action="qb-card-icon" target="_blank" class="i-user-admin-10000 ml-5" title="\u9ad8\u7ea7\u7ba1\u7406\u5458"></a>':'<a href="http://www.baidu.com/search/zhidao_help.html#\u5982\u4f55\u9009\u62e9\u5934\u8854" alog-action="qb-card-icon" target="_blank" class="i-user-admin-'+f+' ml-5" title="'+h+'"></a>'),T+='</p><p><a class="f-info" href="http://www.baidu.com/search/zhidao_help.html#\u5982\u4f55\u9009\u62e9\u5934\u8854" alog-alias="qb-card-grade" target="_blank">'+c+"\u7ea7</a>",T+='<span class="ml-10 f-info">\u91c7\u7eb3\u7387\uff1a'+k+"%</span>",T+='<span class="ml-10 f-info">\u91c7\u7eb3\u6570\uff1a'+y+"</span>",T+='</p><p><a alog-alias="qb-ask-user" class="btn-22-white fixed-ask fixed-ask-normal" username="'+s+'">\u6c42\u52a9\u77e5\u53cb</a></p></div></div>',1!=F.context("user").passPhoto&&1==n&&(T+='<div class="custom-avatar-tip ik-tip line mt-10"><div class="tip-inner"><div class="tip-box"><div class="tip-body">5\u7ea7\u53ca\u4ee5\u4e0a\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u771f\u5b9e\u5934\u50cf~</div></div></div></div>'),T+='<div class="card-info mt-10 pt-5"><p><span class="f-bold">\u64c5\u957f\u9886\u57df\uff1a</span>',d&&d.length?p.forEach(d,function(a){T+='<a class="mr-5" href="/browse/'+a.cid+'" target="_blank" alog-alias="qb-card-area">'+a.cname+"</a>"}):T+="<span>\u6682\u672a\u5b9a\u5236</span>",T+="</p>",m&&v&&(T+='<p><span class="f-bold">\u53c2\u4e0e\u56e2\u961f\uff1a</span><a href="/uteam/view?fr=qb&teamId='+g+'" target="_blank" alog-alias="qb-card-isteam">'+v+"</a></p>"),T+="</div></div></div>"}function r(){p(".user-card").delegate(".fixed-ask","click",function(e){try{e.preventDefault();var i=this;a.async("common:widget/js/logic/iask/iask.js",function(a){a(p(i).attr("username"))})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/card/card.js",method:"",ln:162})}})}function o(a){var e=a.userName,i=a.user,t=a.imId,s=i.mavinUtype,n=i.mavinName,r=i.mavinAnswerNum,o=i.mavinAdoptNum,l=i.mavinTitle,c=i.mavinLevel,p=i.mavinLevelTitle,d=i.mavinAvatar,m=i.mavinFields.join("\u3001"),v=i.mavinDesc,g="",u="";g=n&&n.length>6?n.substr(0,6)+"...":n,u=l&&l.length>6?l.substr(0,6)+"...":l;var f="i-mavin-big-"+c,h='<span class="f-orange f-yahei ml-5" title="'+p+'">V'+c+"</span>";1==s&&(f="i-mavin-big-enterprise",h="");var w=['<div class="card-shadow line">','<div class="user-card mavin-card" id="user-card-'+t+'">','<div class="line mb-10">','<div class="grid avatar-66 mr-10">','<a class="avatar-mavin-a" href="',1==i.mavinIsNew?"/hangjia/profile/":"/mavin/view/",e+'?ie=utf-8" target="_blank">','<img class="avatar-mavin-img" src="'+d+'" />',"</a>","</div>",'<i class="mavin-icon '+f+'"></i>','<a class="btn-22-green fixed-ask fixed-ask-mavin" username="'+e+'">\u5411TA\u54a8\u8be2</a>','<div class="grid f-aid mt-5">','<p class="card-name">','<a href="',1==i.mavinIsNew?"/hangjia/profile/":"/mavin/view/",e+'?ie=utf-8" class="f-bold f-black f-14 mr-10" target="_blank" title="'+n+'">'+g+"</a>",'<span title="'+l+'">'+u+"</span>",h,"</p>",'<p class="mt-10 line mavin-p">',"<span>\u7d2f\u8ba1\u56de\u7b54:</span>",'<span class="f-green mr-5">'+r+"</span></br>","<span>\u4f18\u8d28\u56de\u7b54:</span>",'<span class="f-green">'+o+"</span>","</p>","</div>","</div>",'<div class="card-info pt-5">','<p><span>\u64c5\u957f\uff1a</span><span class="f-aid">'+m+"</span></p>",'<p><span>\u7b80\u4ecb\uff1a</span><span class="f-aid">'+v+"</span></p>","</div>","</div>","</div>"].join("");return w}function l(a){var e=(a.userName,a.imId),i=a.user,t=(i.openExcellent,i.openSiteType),s=i.openSiteName,n=i.openUserTitle,r=i.openAvatarSrc,o=i.openSiteUrl,l=i.openSiteId,c=i.openSiteCid,p=i.openShowType,d=i.openCardSrc,m=i.openCardUrl,v=i.openNewAnswer,g=i.openSiteLevel,u=i.openSiteInfo,f=1==t?"i-company-avatar":"i-government-avatar",h=1==t?"\u4f01\u4e1a\u77e5\u9053\u5b98\u65b9\u5ba2\u670d":"\u653f\u5e9c\u673a\u6784\u5b98\u65b9\u4eba\u5458",w='<div class="card-shadow line"><div class="user-card open-card line" id="user-card-'+e+'"><div class="grid open-content"><div class="line mb-10"><div class="grid avatar-66 mr-10"><a log="pms:pop-up-layer-logo,type:2014" class="avatar-open-a" href="'+o+'" target="_blank">';if(w+='<img class="avatar-open-img" src="'+r+'" /></a><i class="'+f+'" title="'+h+'"></i></div>',w+='<div class="grid mt-5"><p class="card-name"><a log="pms:pop-up-layer-title,type:2014" href="'+o+'" class="user-name f-yahei v-middle" target="_blank">'+s+(n?"-"+n:"")+"</a>",g>0&&(w+='<a class="ml-5 open-level open-level-'+g+'" href="http://tieba.baidu.com/p/3629978955" target="_blank"></a>'),w+='</p><p class="mt-20 pt-5">',w+='<a class="btn-mark-green" log="type:2033,fr:qb,pos:seek-help,ac:click" href="/new?opensiteid='+l+"&opencid="+c+'" target="_blank">\u54a8\u8be2\u5b98\u65b9\u5ba2\u670d</a>',w+='</p></div></div><div class="card-info pt-5">',1==p){if(w+='<p class="f-gray">\u70ed\u95e8\u63a8\u8350\uff1a</p><ul>',"undefined"!=typeof v&&v.length>0)for(var b=v.length>3?3:v.length,k=0;b>k;k++)w+='<li><a class="open-log-a" href="'+v[k][1]+'" target="_blank">'+v[k][0]+"</a></li>";else w+="<span>\u8fd8\u6ca1\u6709\u70ed\u95e8\u63a8\u8350</span>";w+="</ul>"}else 2==p&&(w+='<p class="f-gray">'+u+'<a href="'+o+'" target="_blank">'+o+"</a></p>");return w+="</p></div></div>",d&&(w+='<div class="grid open-img"><a class="open-log-a" href="'+m+'" target="_blank"><img src="'+d+'" /></a></div>'),w+="</div></div>"}function c(a){var e=a.attr("openSiteRank"),i=a.attr("openTotAns"),t=a.attr("openTotSati"),s=['<div class="card-shadow">','<div class="open-level-card">','<p class="line open-rank f-yahei">\u4f4d\u4e8e\u5168\u90e8\u5e73\u53f0<span class="open-rank-num">\u7b2c'+e+"\u4f4d</span></p>",'<p class="line open-answers f-info">','<i class="i-open-answer-total"></i>','<span class="mr-20">\u5df2\u56de\u7b54\u95ee\u9898\uff1a'+i+"</span>",'<i class="i-open-answer-best"></i>',"<span>\u91c7\u7eb3\u7b54\u6848\uff1a"+t+"</span>","</p>","</div>","</div>"];return s.join("")}{var p=a("common:widget/js/util/tangram/tangram.js"),d=a("common:widget/js/ui/tip/tip.js"),m=a("common:widget/js/util/log/log.js");a("common:widget/js/util/event/event.js")}i.exports=function(a){var e=this,i=p(a.target),t=i.parents(".wgt-ask"),v=i.parents(".answer"),g={};if(t.length)g=F.context("page");else if(v.length){var u=v.prop("id").split("-")[1];g=F.context("answers")[u]}if("openLevel"!=a.type&&!g.userName)return!1;var f={tooltipClass:"ik-tip-card",direction:"down",position:{my:"left top",at:"left bottom"},width:g.user.openCardSrc?628:350,arrow:!1,radius:!1,autoDispose:!1,target:i.eq(0)};switch(a.type){case"open":f.content=l(g),f.tooltipClass+=" ik-tip-card-open",f.open=function(){s({tp:201,rf:document.referrer,si:g.user.openSiteId}),p("#user-card-"+g.imId+" a.open-log-a").one("click",function(a){try{s({tp:202,rf:document.referrer,si:g.user.openSiteId})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/js/card/card.js",method:"",ln:370})}}),this.getTipContainer().css({width:f.width+"px"})};break;case"openLevel":f.width=350,f.tooltipClass+=" ik-tip-card-openlevel",f.content=c(i),f.open=function(){this.getTipContainer().css({width:f.width+"px"})};break;case"mavin":g.user.mavinIsNew&&m.addKey({mavinIsNew:1,mavinFields:(g.user.mavinFields||[]).join(",")}),f.content=o(g),f.open=function(){r(g),this.getTipContainer().css({width:f.width+"px"})};break;case"normal":f.content=n(g),f.open=function(){r(g),this.getTipContainer().css({width:f.width+"px"})}}var h=timerHide=0;i.mouseenter(function(){clearTimeout(timerHide),e.tip||(e.tip=new d(f),e.tip.getTipContainer().mouseenter(function(){clearTimeout(timerHide),h=setTimeout(function(){e.tip.show()},500)}).mouseleave(function(){clearTimeout(h),timerHide=setTimeout(function(){e.tip.hide()},500)})),h=setTimeout(function(){e.tip.show()},500)}).mouseleave(function(){clearTimeout(h),e.tip&&"show"==e.tip.getStatus()&&(timerHide=setTimeout(function(){e.tip.hide()},500))})}});
;define("question:widget/js/comment/comment.js",function(e,t,n){function o(e,t){var n=t._getElement("body").empty(),o=F.context("answers")[t.replyId];if(!(e.total_count>0))return t.target.html(g+"\u8bc4\u8bba"),void t.container.addClass("no-comment");if(t.target.html(g+"\u8bc4\u8bba("+e.total_count+")"),t.container.removeClass("no-comment"),e.data&&e.data.length>0&&(t.curPageData={firstReplyId:parseInt(e.data[0].reply_id,10),lastReplyId:parseInt(e.data[e.data.length-1].reply_id,10),currentPn:t.pn,total:e.total_count,count:e.response_count},0==t.pn&&(t.firstPageData=i.object.clone(t.curPageData)),i.each(e.data,function(a,r){var c,s,m=i("<div/>").addClass("comment-entry f-12"),d=i.string((r.title.indexOf("#")>0?"":r.title)+r.content).decodeHTML().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;"),l=!!o.user&&!!o.user.openSiteId&&o.user.openSiteId==r.reserved3;r.user_name.indexOf("#")>1?s=c="\u70ed\u5fc3\u7f51\u53cb":l?(s=i.string(o.user.openSiteName).encodeHTML(),c='<a class="f-light" href="'+o.user.openSiteUrl+'" target="_blank">'+s+"</a>"):(c=['<a class="f-light" href="http://www.baidu.com/p/'+r.user_name+'?from=zhidao" target="_blank">',i.string(r.user_name).encodeHTML(),"</a>"].join(""),s=r.user_name),m.html(['<div class="details f-aid">',c,'<span class="ml-10">',i.date.format(new Date(1e3*r.create_time),"yyyy-M-d HH:mm"),"</span>","</div>",'<div class="comment-content">',d,'<a class="reply-comment ml-5 f-light" href="#">\u56de\u590d</a>',"</div>"].join("")),n.append(m),0==a&&m.addClass("first"),a==e.data.length-1&&m.addClass("last");var u=F.context("user").name==r.user_name?1:0,g="1"==o.isCurrentUser?1:0,p=(1==F.context("user").isAdmin&&(10010==F.context("user").adminLevel||10011==F.context("user").adminLevel||10012==F.context("user").adminLevel),F.context("user").internalAdmin),f=p&&p.bitAuth||{};if(u||g||f.comment_delete){var h=i('<div class="comment-admin grid-r"/>').prependTo(m),y=i('<a href="#" class="comment-delete i-del" title="\u5220\u9664\u8fd9\u6761\u8bc4\u8bba"/>').click(function(e){try{e.preventDefault(),t.remove(r.reply_id)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:132})}}).appendTo(h).hide();f.user_band&&i('<a href="#" class="mr-5"/>').html("\u5c01\u7981\u7528\u6237").click(function(e){try{e.preventDefault(),window.open("/misc/usermanager?un="+i.url.escapeSymbol(r.user_name)+"&ie=gbk")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:140})}}).prependTo(h),f.comment_delete?y.show():m.mouseover(function(){y.show()}).mouseout(function(){y.hide()})}m.find(".reply-comment").click(function(e){try{e.preventDefault(),t.editor.setContent("\u56de\u590d "+s+"\uff1a "),t.replyToUser=r.user_name,t.replyToId=r.reply_id,t.replyTosUser=l?s:"";var n=t.editor.getElement("textarea"),o=n.value.length-1;if(n.setSelectionRange)n.setSelectionRange(o,o);else if(n.createTextRange){var a=n.createTextRange();a.move("character",o),a.select()}i(n).change(),n.focus();var o=t.container.offset();i("body").scrollTop()>o.top&&window.scroll(0,o.top-30)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:181})}})}),e.total_count>t.rn)){var r=i("<p/>").addClass("comment-pager pager h-center pt-5 pb-15").attr("id",t.guid+"page");r.appendTo(n),a(t)}}function a(e){function t(t,o,a){var r='<a href="#"/>';i(r).html(t).addClass(a).click(function(t){try{t.preventDefault(),e.getPageData(o)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/comment/comment.js",method:"",ln:216})}}).appendTo(n)}var n=e._getElement("page").empty(),o=4,a=5,r=10,c=e.pn,s=e.rn,m=e.curPageData.total;if(s>=m)return"";var d=Math.floor(c/s),l=Math.ceil(m/s),u=0,g=l;l>r&&(o>=d?(u=0,g=r):d+a>=l?(u=l-r,g=l):(u=d-o,g=u+r),d>o&&t("\u9996\u9875",0,"pager-first")),u!=d&&t("<\u4e0a\u4e00\u9875",c-s,"pager-pre");for(var p=u;g>p;p++)p==d?i("<b/>").addClass("mr-5").html(p+1).appendTo(n):t(p+1,p*s);return l-1>d&&t("\u4e0b\u4e00\u9875>",c+s,"pager-next"),l>r&&l>d+a+1&&t("\u5c3e\u9875",(l-1)*s,"pager-last"),n}var i=e("common:widget/js/util/tangram/tangram.js"),r=e("common:widget/js/ui/base/base.js"),c=e("common:widget/js/util/event/event.js"),s=(e("common:widget/js/logic/login/login.js"),e("question:widget/js/evaluate/evaluate.js"),e("common:widget/js/logic/authcode/authcode.js")),m=e("common:widget/js/logic/submit/submit.js"),d=e("common:widget/js/ui/dialog/dialog.js"),l=e("common:widget/js/logic/mini-editor/mini-editor.js"),u=e("common:widget/js/util/log/log.js"),g="1"==F.context("user").isAsker?"\u67e5\u770b":"",p=r().extend({_getElement:function(e){return i("#"+this.guid+(e||this.name))},getStatus:function(){return"none"==this.container.css("display")?"hide":"show"},getElement:function(e){return this._getElement(e).get(0)},init:function(){function e(e,t,o){return i("<"+e+"/>").attr("id",n.guid+t).addClass(o)}function t(){var t=['<div class="comment-arrow"><em></em><span></span></div>'];i.browser.ie&&i.browser.ie<9&&t.push('<b class="tl"></b><b class="tr"></b><b class="bl"></b><b class="br"></b>'),n.container=e("div",n.name,"comment-area").hide().append(t.join("")).append(e("div","inner","comment-area-inner"));var o=n.target.parents(".content");1==o.find(".forward-reply").size()?o.find(".editor").after(n.container):0==o.find(".admin-panel").before(n.container).size()&&o.after(n.container),n.container.find(".comment-arrow").css({left:n.target.offset().left-i(".qb-content").offset().left-20+"px"}),0==n.dispNum&&n.container.addClass("no-comment");var a=n._getElement("inner");n.editor=new l({target:a,defaultContent:"\u5199\u4e0b\u4f60\u7684\u8bc4\u8bba",onsubmit:function(){n.submit()},onfocus:function(){n.authcode=n.authcode||new s({container:n.getElement("bar"),from:"new_comment",className:"mt-5"}),c.fire("comment.focus",n)}}),a.append(e("div","bar","comment-action-bar line")),e("div","action","comment-action grid-r mt-5 mb-10").append(e("a","cancel","comment-cancel f-aid").prop("href","#").html("\u53d6\u6d88").click(function(e){try{n.hide(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:379})}}).attr("alog-action","qb-comment-cancel")).append(e("a","submit","comment-submit ml-15 btn-24-green").prop({href:"#",title:"\u6309 Ctrl+Enter \u53d1\u5e03"}).html("\u53d1\u5e03").click(function(e){try{n.submit(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:388})}}).attr("alog-action","qb-comment-submit")).appendTo(n._getElement("bar")),a.append(e("div","body","comment-body line"))}try{var n=this;n.name="comment-area",n.rn=5,n.pn=0,n.target=i(i.isString(n.target)?"#"+n.target:n.target),n.replyId=n.target.attr("id").replace(/[^\d]/g,""),n.dispNum=F.context("answers")[n.replyId].hasComment||0,n.threadId=F.context("answers")[n.replyId].threadId||0,n.target.click(function(e){try{n.container||t(),"hide"==n.getStatus()?n.show():n.hide(),u.send({type:2014,action:"comment",page:"question"}),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/comment/comment.js",method:"",ln:307})}}).mousemove(function(){i(this).addClass("comment-hover")}).mouseout(function(){i(this).removeClass("comment-hover")})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"question:widget/js/comment/comment.js",method:"",ln:396})}},show:function(){var e=this;c.fire("replyask.close",e.replyId),c.fire("adopt.close",e.replyId),c.on("comment.close",function(t,n){e.replyId==n&&e.hide()}),e.once("dataloaded",function(){e._getElement("loading").hide(),i(e.getElement()).slideDown(300,function(){var t=e.container.css("height","").offset().top,n=t+100,o=t+170;7==i.browser.ie&&(n+=30,o+=30),i("body").scrollTop()+i(window).height()<n&&window.scroll(0,o-i(window).height())})}),e.curPageData?e.fire("dataloaded"):(e.getElement("loading")||i("<div/>").prop({className:"comment-loading",id:e.guid+"loading"}).html('<img src="http://img.baidu.com/img/iknow/ask/loading.gif" width="20" height="20" alt="loading..." />').insertBefore(e.container),e.getPageData())},getPageData:function(e){var t=this;t.pn=e||0;var n=i.url.jsonToQuery({app:"qb",method:"get_reply",thread_id:parseInt(t.threadId,10),start:t.pn,limit:t.rn,r:(new Date).getTime()});i.get("/api/comment?"+n,function(e){o(e,t),t.fire("dataloaded"),t.fire("show")},"json")},hide:function(){var e=this;i(e.getElement()).slideUp(300)},submit:function(){var e=this,t=e.editor.getContent();if(commentLen=e.editor.countByte?i.string(t).getByteLength():t.length,restLen=e.editor.maxLength-commentLen,t==e.editor.defaultContent)return void d.alert('<p class="mt-20 h-center">\u60a8\u8f93\u5165\u7684\u8bc4\u8bba\u5185\u5bb9\u4e3a\u7a7a</p>');if(!(0>restLen)){var n={qid:F.context("answers")[e.replyId].qid,aid:e.replyId,content:t,cun:e.replyToUser||"",cid:e.replyToId||""};!!e.replyTosUser&&i.extend(n,{sun:e.replyTosUser}),e.authcode&&e.authcode.submitParam(n),c.fire("login.check",{isLogin:function(){new m({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(t,n){return n.content&&"null"!=n.content?(e.editor.setContent("").change(),e.replyToUser="",e.replyToId="",e.replyTosUser="",e.once("dataloaded",function(){var t=e.container.find(".first").get(0);i(t).fadeIn(function(){t.style&&t.style.zoom&&(t.style.zoom="1")})}),e.getPageData(0),void(e.authcode&&(e.authcode.dispose(),e.authcode=null))):void d.alert("\u53ef\u80fd\u542b\u6709\u4e0d\u9002\u5f53\u53d1\u8868\u7684\u5185\u5bb9\u54e6\uff0c\u4fee\u6539\u540e\u518d\u63d0\u4ea4\u5427~")},authcode:e.authcode||null})},noLogin:function(){c.fire("login.log",{onLoginSuccess:function(){new m({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){u.send({type:2014,action:"comment-submit",page:"question"});var t=location.href;t.match("#")&&(t=t.split("#")[0]),/[?|&]from=\w+/.test(location.search)&&(t=t.split("?")[0]),t=t.match(/\?/)?t+"&from=commentSubmit":t+"?from=commentSubmit",setTimeout(function(){location.href=t+"#answers"+e.replyId},1500)}})}})}})}},remove:function(e){{var t=this;d.confirm('<div class="mt-20 h-center">\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417\uff1f</div>',{width:360,height:150,title:"\u77e5\u9053\u63d0\u793a",onaccept:function(){var n={qid:F.context("answers")[t.replyId].qid,aid:t.replyId,cid:e};c.fire("login.check",{isLogin:function(){new m({url:"/submit/comment/drop/",syncId:"commentDrop",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){c.fire("dialog.close");var e=t.pn;t.curPageData.count<=1&&(e=e&&e-t.rn),t.curPageData=i.object.clone(t.firstPageData),t.getPageData(0>e?0:e)}})}})}})}}});n.exports=p,n.exports.getCount=function(){function e(){if(location.hash){var e=location.hash.replace(/[^\d]/g,"");-1!=location.search.indexOf("from=comment")&&i("#comment-"+e).click()}}var t=[],n={},o=[];if(i(".comment").each(function(e,a){var i=a.id.replace(/[^\d]/g,""),r=F.context("answers")[i],c=r.threadId;n[c]=parseInt(i,10),1==parseInt(r.hasComment,10)&&(t.push({thread_id:parseInt(c,10),reply_id:0,query_mask:999}),o.push(c))}),t.length){var a=i.url.jsonToQuery({method:"get_reply_count",app:"qb",thread_id:o.join(",")});i.get("/api/comment?"+a,function(t){if(t&&t.res)for(var a=0;a<t.res.length;a++){var r=i("#comment-"+n[o[a]]);t.res[a].total_count>0&&r.size()&&r.html(g+"\u8bc4\u8bba("+t.res[a].total_count+")")}e()},"json")}}});
;define("question:widget/js/ed2k/ed2k.js",function(e,t,n){var i=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/util/log/log.js"),o=(e("common:widget/js/logic/login/login.js"),e("common:widget/js/util/event/event.js")),d=e("common:widget/js/util/uri/uri.js"),l=e("common:widget/js/ui/dialog/dialog.js");window.bdplayerUa=F.context("page").bdplayer;var c,r,s=!!location.href.match(/video=/),p=function(e){var t=i.Deferred();return i.sio(e).callByBrowser(function(){t.resolve()}),t.promise()},u=-1,g=function(e){var t=null;try{t=new ActiveXObject("ThunderAgent.Agent")}catch(n){try{t=new ActiveXObject("ThunderAgent.Agent.1")}catch(n){}}if(t)try{return t.CallAddTask(e,"","",1,"",""),!0}catch(n){try{return t.AddTask(e,"","","","",1,1,10),t.CommitTasks(),!0}catch(n){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(e),!0}catch(n){}return!1},m=function(e,t,n){var e=e.replace(/[^\x00-\xff]/g,encodeURIComponent);try{e=decodeURIComponent(e),t=decodeURIComponent(t),done()}catch(i){c||(c=p("http://img.iknow.bdimg.com/question/gbk-url.js")),c.done(function(){try{e=GBK_URL.decode(e),t=GBK_URL.decode(t)}catch(i){}n({ed2kLink:e,filename:t})})}},f=function(){var t=i(".ed2k-wrap");t.size()&&a.send({type:2065,page:"qb_ed2k",action:"ed2k_pv",referrer:document.referrer}),t.each(function(t,n){var o=i(n).data("link"),c=i(n).data("filename");displayLink=o.replace(/[^\x00-\xff]/g,encodeURIComponent),displayLink=displayLink.substr(0,150)+"...";var r=['<div class="ed2k-con">','<a class="ed2k-link">',i.string(displayLink).encodeHTML(),"</a>",'<a class="btn-24-white btn-play"><span>\u5728\u7ebf\u64ad\u653e<i></i></span></a>',"</div>"].join("");s||(r+='<p class="f-12 f-gray ed2k-comment">\u8bf7<a class="baidu-player-link" target="_blank" href="http://player.baidu.com/player3/index.html?tn=141">\u4e0b\u8f7d\u767e\u5ea6\u5f71\u97f3</a>\u5728\u7ebf\u64ad\u653e\uff0c\u6216<a class="ed2k-copy-link" data-clipboard-text="'+i.string(o).encodeHTML()+'" href="'+i.string(o).encodeHTML()+'">\u590d\u5236\u94fe\u63a5</a>\uff0c\u4f7f\u7528\u5176\u4ed6\u8f6f\u4ef6\u8fdb\u884c\u4e0b\u8f7d\u3002</p>'),i(n).html(r),m(o,c,function(e){i(n).data("link",e.ed2kLink),i(n).data("filename",e.filename)}),e.async("common:widget/js/ui/clipboard/clipboard.js",function(e){var t=new e(i(n).find(".ed2k-copy-link")[0],{moviePath:d.clipboardSwf});t.on("complete",function(e){e.resetBridge(),l.alert("\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u8d34\u7248"),a.send({type:2065,page:"qb_ed2k",action:"ed2k_copy_link_click"})})})})};n.exports.init=function(){try{i(function(){i.browser.ie&&i.browser.ie<=6?setTimeout(function(){f()},300):f()}),i("#qb-content").on("click",".ed2k-wrap .baidu-player-link",function(e){try{a.send({type:2065,page:"qb_ed2k",action:"baidu_player_click"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/ed2k/ed2k.js",method:"",ln:152})}}).on("mousedown",".ed2k-wrap .btn-play",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_play_click",referrer:document.referrer})}).on("mousedown",".ed2k-wrap .ed2k-link",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_link_click",referrer:document.referrer})}).on("click",".ed2k-wrap .ed2k-link, .ed2k-wrap .btn-play",function(t){try{t.preventDefault();var n=i(t.target).closest(".ed2k-wrap");r||(window.BdParam={},i('<div id="Bdobj" style="width: 0px;height: 0px;"></div><div id="callbdplay" style="width: 0px;height: 0px;"></div>').appendTo("body"),r=p("http://php.player.baidu.com/bdplayer/com_install.js")),r.done(function(){if(bdplayer.url=n.data("link"),bdplayer.title=n.data("filename"),-1==u&&(u=bdplayer.IsInstall()),u)return void setTimeout(function(){bdplayer.ClientPlay(n.data("link"),n.data("filename"))},1e3);if(bdplayer.VerUp)l.alert("\u4e3a\u7ed9\u60a8\u66f4\u597d\u7684\u89c2\u5f71\u4f53\u9a8c\uff0c\u8bf7\u4e0b\u8f7d\u6700\u65b0\u7248\u767e\u5ea6\u5f71\u97f3\u8fdb\u884c\u89c2\u8d4f\u3002",{buttons:{items:[{text:"\u4e0b\u8f7d",click:function(){try{window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/ed2k/ed2k.js",method:"",ln:192})}}}],align:"center",enable:!0}});else{if(g(n.data("link")))return;new l({title:"\u77e5\u9053\u63d0\u793a",content:'<div class="ed2k-dialog">\u60a8\u53ef\u4ee5\u9009\u62e9\uff1a<br/>1. \u4e0b\u8f7d\u767e\u5ea6\u5f71\u97f3\uff0c\u76f4\u63a5\u5728\u7ebf\u64ad\u653e\uff1b<br/>2. \u590d\u5236\u94fe\u63a5\uff0c\u4f7f\u7528\u5176\u4ed6\u8f6f\u4ef6\u8fdb\u884c\u4e0b\u8f7d\u3002</div>',autoDispose:!0,buttons:{items:[{text:"\u4e0b\u8f7d\u767e\u5ea6\u5f71\u97f3",btnClass:"btn-32-green",click:function(){try{window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/ed2k/ed2k.js",method:"",ln:215})}}},{text:"\u590d\u5236\u94fe\u63a5",btnClass:"btn-32-silver btn-dialog-copy"}],align:"center",enable:!0},width:400,height:180}),i(".btn-dialog-copy").attr("data-clipboard-text",n.data("link")),e.async("common:widget/js/ui/clipboard/clipboard.js",function(){var e=new ZeroClipboard(i(".btn-dialog-copy")[0],{moviePath:d.clipboardSwf});e.on("complete",function(e){e.resetBridge(),o.fire("dialog.close"),l.alert("\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u8d34\u7248")})})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/ed2k/ed2k.js",method:"",ln:241})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/ed2k/ed2k.js",method:"",ln:242})}}});
;define("question:widget/js/egg/egg.js",function(e,t,i){function o(){var e=s('<div id="ik-qb-egg"/>').append(s('<div id="ik-qb-egg-hdl"/>')),t=s("<a/>").prop({id:"ik-qb-egg-a",href:"#"}).appendTo(e),o=s('<div id="ik-qb-egg-con"/>').appendTo(e);e.appendTo(document.body),s.swf.create({url:r.flashUrl,id:"ik-qb-egg-flash",width:150,height:150,menu:!1,wmode:"transparent",allowscriptaccess:"sameDomain"},o.get(0)),s.cookie.set("IK_EGG_QB",r.id,{path:"/",expires:s.date.parse(r.offlineTime),domain:location.host.replace(/:\d+/,"")}),s("#ik-qb-egg-flash").mousedown(g),e.mousedown(g),t.click(function(e){try{i.exports.close(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/egg/egg.js",method:"",ln:48})}})}function n(e){s.sio(r.activeUrl).callByServer(function(t){t.status==r.activeStatus?e():e(!0)})}function g(e){if(!l&&"ik-qb-egg-a"!=e.target.id){var o=s("#ik-qb-egg-a").offset();if(e.pageX>o.left&&e.pageY>o.top)return void i.exports.close();t.close(),1==r.active&&1==F.context("user").isLogin?n(function(e){a(e)}):a()}}function a(e){var t=r.dialogText,i=r.btnText;1==F.context("user").isLogin&&(t=r.dialogTextLogin||t,i=r.btnTextLogin||i),e&&(t=r.dialogTextActive||t,i=r.btnTextActive||i);{var o=['<div class="ik-egg-dialog">','<p id="ik-egg-text">',t,"</p>",'<p><a id="ik-egg-btn" class="btn-32-green" href="',r.targetUrl,'" target="_blank">',r.btnText,"</a></p></div>"].join("");new d({title:"\u77e5\u9053\u63d0\u793a",content:o,width:358,height:195,autoDispose:!0,open:function(){r.dialogBackground&&this.getElement("body").css("background",'url("'+r.dialogBackground+'") no-repeat 0 0'),s("#ik-egg-text").css("margin-right",r.dialogTextMargin+"px"),s("#ik-egg-btn").click(function(e){try{c.fire("dialog.close"),1!=F.context("user").isLogin&&1==r.guideLogin&&(e.preventDefault(),c.fire("login.log",{onLoginSuccess:function(){r.guideLogin=0,1==r.active?n(function(e){a(e)}):a()}}))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/egg/egg.js",method:"",ln:151})}})}})}}var s=e("common:widget/js/util/tangram/tangram.js"),c=e("common:widget/js/util/event/event.js"),d=e("common:widget/js/ui/dialog/dialog.js"),r={},l=!1;i.exports.init=function(e){try{s.extend(r,e);var t=s.cookie.get("IK_EGG_QB"),i=Math.random(),n=s.date.parse(r.onlineTime),g=s.date.parse(r.offlineTime);if((new Date).getTime()<n.getTime()||(new Date).getTime()>=g.getTime()||t==r.id)return;if(1==F.context("user").isLogin&&i<r.loginRate||1!=F.context("user").isLogin&&i<r.notLoginRate){if(r.limitGrade&&parseInt(F.context("user").gradeIndex)<r.limitGrade||r.limitGoodRate&&parseInt(F.context("user").goodRate)<r.limitGoodRate)return;o()}}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/js/egg/egg.js",method:"",ln:183})}},i.exports.close=function(){s("#ik-qb-egg").remove()}});
;define("question:widget/js/evaluate/evaluate.js",function(t,e,a){var i=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/ui/base/base.js"),o=t("common:widget/js/util/event/event.js"),s=t("common:widget/js/logic/submit/submit.js"),u=(t("common:widget/js/logic/login/login.js"),t("common:widget/js/util/log/log.js")),l=t("common:widget/js/logic/mini-editor/mini-editor.js"),d=t("common:widget/js/ui/dialog/dialog.js"),r=t("common:widget/js/util/store/store.js"),m=t("common:widget/js/ui/tip/tip.js"),c=n().extend({_getElement:function(t){return t?this.target.find("#"+this.guid+"-"+t):this.target},_getBadElement:function(t){return t?this.badTarget.find("#"+this.guid+"-bad-"+t):this.badTarget},getEvaluteData:function(){var t=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0;return r.get("evaluate"+t)?r.get("evaluate"+t):!1},hasEvaluted:function(){return this.getEvaluteData()?i.array(this.getEvaluteData().split(",")).contains(this.currentData):!1},init:function(){try{var t=this;t.target=i(t.target),t.badTarget=t.target.next(),t.replyId=t.target.attr("id").replace(/[^\d]/g,""),t.qid=F.context("answers")[t.replyId].qid,t.isLogin=F.context("user").isLogin,t.currentData=[t.qid,t.replyId].join("|"),t.goodNum=t.target.data("evaluate"),t.badNum=t.badTarget.data("evaluate");var e=['<span class="evaluate-outer" id="#{guid}-outer">','<span class="evaluate-inner" id="#{guid}-inner">','<b class="evaluate-tip" style="display:none" id="#{guid}-tip"></b>','<b class="evaluate-num" id="#{guid}-num"></b>',"</span>","</span>"].join("");t.hasEvaluted()&&(t.target.addClass("evaluated"),t.badTarget.addClass("evaluated")),t.isEvaluated=t.target.hasClass("evaluated")||t.hasEvaluted(),t.target.html(i.string(e).format({guid:t.guid})),t._getElement("tip").text("\u7ed9\u529b"),t._getElement("num").text(t.goodNum),t.goodNum<=9999&&t._getElement("num").addClass("evaluate-num-fixed"),t.badTarget.html(i.string(e).format({guid:t.guid+"-bad"})),t._getBadElement("tip").text("\u4e0d\u7ed9\u529b"),t._getBadElement("num").text(t.badNum),t.badNum<=9999&&t._getBadElement("num").addClass("evaluate-num-fixed"),t._bind()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:112})}},_bind:function(){var t=this;t.target.mouseenter(function(){t._getElement("tip").show(),t._getElement("num").hide()}).mouseleave(function(){t._getElement("tip").hide(),t._getElement("num").show()}).click(function(e){try{if(e.preventDefault(),i(this).hasClass("evaluate-mine")||t.isEvaluated)return;if(!t.isEvaluated){if(t.hasEvaluted())return void t._getElement("tip").text("\u7ed9\u529b");t.submit()}u.send({type:2014,action:"evaluate",page:"question",pos:"good",first:i(this).hasClass("evaluate-32")?1:0})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:146})}}),t.on("commentsubmit",function(){var e=['<i class="i-tick mr-5"></i>','<span class="f-green">\u56de\u7b54\u8005\u5c06\u6536\u5230\u8d5e\u540c</span>','<p class="f-aid ml-20">\u8d5e\u540c\u8bb0\u5f55\u5df2\u4fdd\u5b58</p>'].join(""),a=t.target.find(".evaluate-outer"),i=new m({tooltipClass:"tip-white",content:e,target:a,direction:"bottom",position:{my:"left bottom-10",at:"left top"}});i.show(),setTimeout(function(){i.hide(),"1"!=t.isLogin&&location.reload(!0)},3e3)}),t.on("tipload",function(){var e=t.tip.getTipContainer(),a=new l({target:e.find(".tip-comment-editor").get(0),maxLength:15,defaultContent:"",width:206});t.editor=a,a.on("focus",function(){e.find(".comment-alert").eq(0).html("").hide()}),a.on("submit",function(){var e=this.getContent();return e==this.defaultContent||""===i.string.trim(e)?void d.alert("\u60a8\u8f93\u5165\u7684\u8bc4\u8bba\u5185\u5bb9\u4e3a\u7a7a"):void t.submitComment(e)}),e.find(".btn-24-white").click(function(t){try{a.fire("submit")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:210})}}),t.on("commentsubmit",function(){t.tip.hide()})}),t.badTarget.mouseenter(function(){t._getBadElement("tip").show(),t._getBadElement("num").hide()}).mouseleave(function(){t._getBadElement("tip").hide(),t._getBadElement("num").show()}).click(function(e){try{if(e.preventDefault(),i(this).hasClass("evaluate-mine")||t.isEvaluated)return;if(!t.isEvaluated){if(t.hasEvaluted())return void t._getBadElement("tip").text("\u4e0d\u7ed9\u529b");t.submitBad()}u.send({type:2014,action:"evaluate",page:"question",pos:"bad",first:i(this).hasClass("evaluate-32")?1:0})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:248})}})},submit:function(){var t=this;new s({params:{cm:100669,qid:t.qid,aid:t.replyId,type:1},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.target.addClass("evaluated").mouseout(),t.badTarget.addClass("evaluated").mouseout(),t.numScroll(t.target);var e=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0,a=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;if(r.set("evaluate"+e,a),"1"==t.isLogin){var n=['<div class="tip-comment-box line mt-10 mb-10">','<div class="tip-comment-editor grid"></div>','<a class="btn-24-white grid-r" title="\u6309 Ctrl+Enter \u53d1\u5e03">\u53d1\u5e03</a>','<p class="comment-alert" style="display:none;"></p>',"</div>"].join("");t.showTip({container:n,defaultType:"button"})}t.goodNum>9999&&t._getElement("num").removeClass("evaluate-num-fixed"),t._getElement("tip").text("\u7ed9\u529b")}})},submitBad:function(){var t=this;new s({params:{cm:100680,qid:t.qid,aid:t.replyId,type:2},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.badTarget.addClass("evaluated").mouseout(),t.target.addClass("evaluated").mouseout(),t.numScroll(t.badTarget);var e=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0,a=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;r.set("evaluate"+e,a),t.badNum>9999&&t._getBadElement("num").removeClass("evaluate-num-fixed"),t._getBadElement("tip").text("\u4e0d\u7ed9\u529b")}})},numScroll:function(t){var e=this;t=t.find(".evaluate-num").size()?t.find(".evaluate-num").eq(0):t;var a=parseInt(t.text())+1;t.html(a);var i=t.clone().css({position:"absolute",right:0,top:0}).html(a);t.parent().css("position","relative").append(i),i.animate({top:"-22px"},function(){i.remove(),e.fire("numscroll")})},showTip:function(t){var e=this,a=i.extend({skin:"evaluate-tip",header:'<p class="f-aid">\u9009\u4e2a\u8d5e\u7f8e\u7684\u8bdd\u513f\u544a\u8bc9\u4ed6\u5427~</p>',footer:"",container:"",target:e.target,defaultType:"text"},t||{}),n=['<div class="#{skin}">','<div class="tip-header">#{header}</div>',"#{container}",'<ul class="line evaluate-text f-12" alog-group="qb-zan-quick"></ul>',"#{footer}","</div>"].join("");e.tip=new m({tooltipClass:"tip-white",closebox:!0,direction:"top",effect:!1,autoDispose:!1,content:i.string(n).format(a),target:a.target}),e.tip.show();var o=e.tip.getTipContainer(),s=["\u8c22\u8c22\u697c\u4e3b\u7684\u56de\u7b54(=^ ^=)","\u7b54\u5f97\u592a\u597d\u4e86\uff0c\u6012\u8d5e^\u03c9^","\u8d5e\u540c\u697c\u4e3b\uff0c\u662f\u6b63\u89e3","\u82f1\u96c4\u6240\u89c1\u7565\u540c\u554a\uff01","\u56f4\u89c2\u5927\u795e\u7ea7\u56de\u7b54\uff01","o(\u2267 v \u2266)o~~\u7b54\u5f97\u597d\u68d2"],u=o.find("ul").empty();o.css({width:"275px"}),o.find(".tip-header").html(a.header),i(s).each(function(t,e){"text"==a.defaultType?u.append('<li><a class="text'+t+'" href="#">'+e+"</a></li>"):"button"==a.defaultType&&u.append(0==t?'<li class="first"><a class="text'+t+'" title="'+e+'" href="#"></a></li>':'<li><a class="text'+t+'" title="'+e+'" href="#"></a></li>')}),o.find("ul li a").click(function(t){try{t.preventDefault(),"text"==a.defaultType?e.submitComment(i(this).text()):"button"==a.defaultType&&e.submitComment(i(this).attr("title")),e.tip.hide()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:426})}});var l=function(t){try{!e.tip.getTipContainer().size()||i.contains(e.tip.getTipContainer().get(0),t.target)||i.contains(a.target.get(0),t.target)||(e.tip.hide(),i(document).unbind("click",l))}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/evaluate/evaluate.js",method:"",ln:435})}};return i(document).on("click",l),e.fire("tipload"),e.tip},submitComment:function(t){var e=this;t=i.string(t).trim(),""!=t&&o.fire("login.check",{isLogin:function(){var a=0===e.type,n=a?"/submit/ajax":"/submit/comment/reply/?encoding=gbk",o=i.extend({qid:e.qid,aid:e.replyId},a?{cm:"100677",words:t}:{content:t,cun:"",cid:"",which:e.nagetive||""});new s({url:n,params:o,syncId:"evaluateComment",autoRefresh:!0,beforeJump:function(){e.fire("commentsubmit",t)}})}})}});a.exports=c});
;define("question:widget/js/evaluate/open/open.js",function(e,t,i){var n=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/ui/base/base.js"),s=e("common:widget/js/logic/mini-editor/mini-editor.js"),o=(e("question:widget/js/evaluate/evaluate.js"),e("common:widget/js/ui/tip/tip.js")),r=e("common:widget/js/logic/submit/submit.js"),l=e("common:widget/js/util/event/event.js"),d=e("common:widget/js/ui/dialog/dialog.js"),u=(e("common:widget/js/logic/login/login.js"),a().extend({_getElement:function(e){return e?this.target.find("#"+this.guid+"-"+e):this.target},init:function(){try{var e=this;e.target=n(e.target),e.whichBtn=null,e.replyId=e.target.attr("id").replace(/[^\d]/g,""),e.qid=e.replyId&&F.context("answers")[e.replyId].qid,e.siteId=e.replyId&&F.context("answers")[e.replyId].user.openSiteId,e.isLogin=F.context("user").isLogin;var t=n.url.jsonToQuery({uid:F.context("user").id||0,qid:e.qid,rid:e.replyId,siteId:e.siteId});n.get("/c/qb_rating/get?"+t,function(t){0==t.errorNo&&(e.initHtml(t),e.bind(),e.isGoodValid=t.isGoodValid,e.isBadValid=t.isBadValid)},"json")}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:43})}},initHtml:function(e){try{var t=['<span class="evaluate-outer" id="#{guid}-outer">','<span class="evaluate-inner" id="#{guid}-inner">',"</span>","</span>"].join(""),i=this;(e.isEvaluate||i.target.hasClass("evaluate-mine"))&&i.target.addClass("evaluated");var a=['<span class="evaluate-open-btn">','<b class="evaluate-tip">#{tip}</b>','<b class="evaluate-num">#{num}</b>',"</span>"].join("");a=n.string(a);var s={very:n(a.format({tip:"\u5f88\u6ee1\u610f",num:e.rate.very})).addClass("btn-very"),yes:n(a.format({tip:"\u6ee1\u610f",num:e.rate.yes})).addClass("btn-yes"),no:n(a.format({tip:"\u4e0d\u6ee1\u610f",num:e.rate.no})).addClass("btn-no")};e.isEvaluate&&s[e.evaluate]&&s[e.evaluate].append('<b class="evaluate-tip evaluate-done" style="display:none;">\u5df2\u8bc4\u4ef7</b>'),n(n.string(t).format({guid:i.guid})).appendTo(i.target.empty()),n.each(s,function(e,t){i._getElement("inner").append(t),t.css("width",t.outerWidth())})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:82})}},_getTipText:function(){},_setTipText:function(e){this.contentItem=e},favoriteSubmit:function(){var e=this,t=e.replyId;l.fire("login.check",{isLogin:function(){var i=n.url.jsonToQuery({uid:F.context("user").id,qid:F.context("answers")[t].qid,rid:t,siteId:F.context("answers")[t].user.openSiteId,which:e.nagetive});e.target.addClass("evaluated"),e.numScroll(n(e.whichBtn).find(".evaluate-num")),n(e.whichBtn).append('<b class="evaluate-tip evaluate-done" style="display:none;">\u5df2\u8bc4\u4ef7</b>').mouseout(),e.isGoodValid?n.post("/c/qb_rating/set",i,function(t,i,a){var s=a.responseText?n.json.parse(a.responseText):{errorNo:1};0==s.errorNo?(e._setTipText(["\u6709\u9488\u5bf9\u6027,\u5b8c\u5168\u89e3\u51b3\u95ee\u9898!","\u4fe1\u606f\u91cf\u4e30\u5bcc,\u5f88\u8be6\u7ec6!","\u7b54\u5f97\u633a\u5ba2\u89c2\u5b9e\u5728!"]),e.showTip({target:e.whichBtn,skin:"evaluate-open-tip",header:'<p class="f-12 f-black">\u7ed9\u6211\u4eec\u4e00\u70b9\u80af\u5b9a,\u6211\u4eec\u5c06\u66f4\u597d\u5730\u4e3a\u60a8\u670d\u52a1</p>',footer:['<div class="tip-comment-box line mt-10">','<div class="tip-comment-editor grid"></div>','<a class="btn-24-white grid-r" title="\u6309 Ctrl+Enter \u53d1\u5e03">\u53d1\u5e03</a>','<p class="comment-alert" style="display:none;"></p>',"</div>"].join("")})):e.showFloatLayer(e,e.whichBtn,"\u63d0\u4ea4\u5f02\u5e38,\u63d0\u4ea4\u5931\u8d25")}):n.post("/c/qb_rating/set",i,function(t,i,a){var s=a.responseText?n.json.parse(a.responseText):{errorNo:1};0==s.errorNo?e.showFloatLayer(e,e.whichBtn,"\u611f\u8c22\u60a8\u7684\u8bc4\u4ef7\uff0c\u6211\u4eec\u4f1a\u52aa\u529b\u505a\u5f97\u66f4\u597d"):e.showFloatLayer(e,e.whichBtn,"\u63d0\u4ea4\u5f02\u5e38,\u63d0\u4ea4\u5931\u8d25")})}})},nagetiveSubmit:function(){var e=this,t=e.replyId;l.fire("login.check",{isLogin:function(){var i=n.url.jsonToQuery({uid:F.context("user").id,qid:F.context("answers")[t].qid,rid:t,siteId:F.context("answers")[t].user.openSiteId,which:3});e.isBadValid?(e._setTipText(["\u592a\u5bbd\u6cdb\uff0c\u8981\u6709\u9488\u5bf9\u6027","\u4e0d\u8981\u94fe\u63a5\u6216\u7535\u8bdd\uff0c\u6211\u8981\u76f4\u63a5\u770b\u7b54\u6848","\u4e0d\u591f\u5ba2\u89c2\uff0c\u6709\u5e7f\u544a\u5acc\u7591\u7684\u8bf4"]),e.showTip({target:e.whichBtn,skin:"evaluate-open-tip",header:'<p class="f-12 f-black">\u8bf7\u60a8\u53cd\u9988"\u4e0d\u6ee1\u610f"\u7684\u539f\u56e0,\u6211\u4eec\u5c06\u52aa\u529b\u63d0\u9ad8</p>',footer:['<div class="tip-comment-box line mt-10">','<div class="tip-comment-editor grid"></div>','<a class="btn-24-white grid-r" title="\u6309 Ctrl+Enter \u53d1\u5e03">\u53d1\u5e03</a>','<p class="comment-alert" style="display:none;"></p>',"</div>"].join("")})):n.post("/c/qb_rating/set",i,function(t,i,a){var s=a.responseText?n.json.parse(a.responseText):{errorNo:1};0==s.errorNo?(e.target.addClass("evaluated"),n(e.whichBtn).append('<b class="evaluate-tip evaluate-done" style="display:none;">\u5df2\u8bc4\u4ef7</b>').mouseout(),e.numScroll(n(e.whichBtn).find(".evaluate-num")),e.showFloatLayer(e,e.whichBtn,"\u60a8\u7684\u53cd\u9988\u6211\u4eec\u5df2\u7ecf\u6536\u5230\uff0c\u975e\u5e38\u611f\u8c22!")):e.showFloatLayer(e,e.whichBtn,"\u63d0\u4ea4\u5f02\u5e38,\u63d0\u4ea4\u5931\u8d25")})}})},showFloatLayer:function(e,t,i){var n='<div class="evaluate-text-open"><i class="i-tick mr-5"></i><span class="f-green">'+i+"</span>",a=new o({content:n,target:t,direction:"top",autoDispose:!0});a.show(),setTimeout(function(){a.hide(),"1"!=e.isLogin&&location.reload(!0)},3e3)},submit:function(){var e=this,t=e.replyId,i=n.url.jsonToQuery({uid:F.context("user").id,qid:F.context("answers")[t].qid,rid:t,siteId:F.context("answers")[t].user.openSiteId,which:e.nagetive});n.post("/c/qb_rating/set",i,function(t,i,a){var s=a.responseText?n.json.parse(a.responseText):{errorNo:1};0==s.errorNo?(e.target.addClass("evaluated"),n(e.whichBtn).append('<b class="evaluate-tip evaluate-done" style="display:none;">\u5df2\u8bc4\u4ef7</b>').mouseout(),e.numScroll(n(e.whichBtn).find(".evaluate-num"))):e.showFloatLayer(e,e.whichBtn,"\u63d0\u4ea4\u5f02\u5e38,\u63d0\u4ea4\u5931\u8d25")})},bind:function(){var e=this.target,t=this;t.once("tipload",function(){var e=t.tip.getTipContainer(),i=new s({target:e.find(".tip-comment-editor").get(0),defaultContent:"\u8bf7\u5bf9\u6211\u4eec\u7684\u56de\u7b54\u670d\u52a1\u8fdb\u884c\u8bc4\u8bba\u53cd\u9988",width:206}),a=e.find(".btn-24-white").eq(0);i.on("focus",function(){var t=e.find(".comment-alert").eq(0);t.html("").hide()}),i.on("submit",function(){var e=this.getContent();return e==this.defaultContent||""==n.string(e).trim()?void d.alert("\u60a8\u8f93\u5165\u7684\u8bc4\u8bba\u5185\u5bb9\u4e3a\u7a7a"):void t.submitComment(e)}),a.click(function(){try{i.fire("submit")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:266})}}),t.once("commentsubmit",function(){t.tip.hide(),3==t.nagetive&&t.submit()})}),e.hasClass("evaluate-mine")||e.delegate(".evaluate-open-btn","mouseover",function(){if(e.hasClass("evaluated")){var t=e.find(".evaluate-done").parent().width();return void e.find(".evaluate-done").css({width:t-1,padding:0}).show().siblings().hide()}n(this).hasClass("btn-no")||n(this).addClass("evaluate-hover")}).delegate(".evaluate-open-btn","mouseout",function(){return e.hasClass("evaluated")?void e.find(".evaluate-done").hide().siblings().show():void(n(this).hasClass("btn-no")||n(this).removeClass("evaluate-hover"))}).delegate(".evaluate-open-btn","click",function(i){try{if(e.hasClass("evaluated"))return;t.whichBtn=this,n(this).hasClass("btn-no")?(t.nagetive=3,t.nagetiveSubmit()):(t.nagetive=n(this).hasClass("btn-yes")?2:1,t.favoriteSubmit())}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:321})}})},numScroll:function(e){var t=this;e=e.find(".evaluate-num").size()?e.find(".evaluate-num").eq(0):e;var i=parseInt(e.text())+1;e.html(i);var n=e.clone().css({position:"absolute",right:0,top:0}).html(i);e.parent().css("position","relative").append(n),n.animate({top:"-22px"},function(){n.remove(),t.fire("numscroll")})},showTip:function(e){var t=this,i=n.extend({skin:"evaluate-tip",header:'<p class="f-aid">\u9009\u4e2a\u8d5e\u7f8e\u7684\u8bdd\u513f\u544a\u8bc9\u4ed6\u5427~</p>',footer:"",container:"",target:t.target,defaultType:"text"},e||{}),a=['<div class="#{skin}" style="width:260px;">','<div class="tip-header">#{header}</div>',"#{container}",'<ul class="line evaluate-text f-12" alog-group="qb-zan-quick"></ul>',"#{footer}","</div>"].join("");t.tip=new o({tooltipClass:"tip-white",closebox:!0,direction:"top",effect:!1,autoDispose:!1,content:n.string(a).format(i),target:i.target}),t.tip.show();var s=t.tip.getTipContainer(),r=t.contentItem||["\u8c22\u8c22\u697c\u4e3b\u7684\u56de\u7b54(=^ ^=)","\u7b54\u5f97\u592a\u597d\u4e86\uff0c\u6012\u8d5e^\u03c9^","\u8d5e\u540c\u697c\u4e3b\uff0c\u662f\u6b63\u89e3","\u82f1\u96c4\u6240\u89c1\u7565\u540c\u554a\uff01","\u56f4\u89c2\u5927\u795e\u7ea7\u56de\u7b54\uff01","o(\u2267 v \u2266)o~~\u7b54\u5f97\u597d\u68d2"],l=s.find("ul").empty();s.find(".tip-header").html(i.header),n(r).each(function(e,t){"text"==i.defaultType?l.append('<li><a class="text'+e+'" href="#">'+t+"</a></li>"):"button"==i.defaultType&&l.append(0==e?'<li class="first"><a class="text'+e+'" title="'+t+'" href="#"></a></li>':'<li><a class="text'+e+'" title="'+t+'" href="#"></a></li>')}),s.find("ul li a").click(function(e){try{e.preventDefault(),"text"==i.defaultType?t.submitComment(n(this).text()):"button"==i.defaultType&&t.submitComment(n(this).attr("title")),t.tip.hide()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:412})}});var d=function(e){try{!t.tip.getTipContainer().size()||n.contains(t.tip.getTipContainer().get(0),e.target)||n.contains(i.target,e.target)||(t.tip.hide(),n(document).unbind("click",d))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/evaluate/open/open.js",method:"",ln:421})}};return n(document).on("click",d),t.fire("tipload"),t.tip},submitComment:function(e){var t=this;e=n.string(e).trim(),""!=e&&l.fire("login.check",{isLogin:function(){var i=0===t.type,a=i?"/submit/ajax":"/submit/comment/reply/?encoding=gbk",s=n.extend({qid:t.qid,aid:t.replyId},i?{cm:"100677",words:e}:{content:e,cun:"",cid:"",which:t.nagetive||""});new r({url:a,params:s,syncId:"evaluateComment",autoRefresh:!0,beforeJump:function(){t.fire("commentsubmit",e)}})}})}}));i.exports=u});
;define("question:widget/js/file/file.js",function(e,t,a){function n(e){o("file").each(function(t,i){var a,n=o(i),s="http://pan.baidu.com"+n.attr("link")+"&app=zd",g=n.parentsUntil(".answer").parent(".answer"),h=g&&g.attr("id").match(/\d+/)[0],m=n.parent().hasClass("replyask-content")?n.parent().attr("id").match(/\d+/)[0]:0,u=n.attr("fsid")||"",w=n.attr("wealth")||0,v=m>0?m:h;if(!e||e.errno)a=['<div class="file line mt-10 f-12 file-fail">','<span class="ml-10 mr-5">\u9644\u4ef6\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7</span>','<a target="_self" href="javascript:window.location.reload();">\u70b9\u51fb\u5237\u65b0</a>',"</div>"].join("");else{var x=!1;o(e.data).each(function(e,t){var n=t.fileMeta&&t.fileMeta.fs_id&&t.shareMeta&&0==t.shareMeta.errno&&0==t.shareMeta.status;if(n){if(t.fileMeta.fs_id==u){x=!0;var g=t.fileMeta,j=g.server_filename.split("."),k=g.server_filename;a=['<div class="file line mt-10 f-12">','<div class="file-inner">','<a href="#" target="_blank" class="grid mr-10 fileIcon-big ',b(j[j.length-1]),'"></a>','<div class="info grid">',"<p>",'<a href="#" target="_blank" class="f-yahei" title="',o.string.encodeHTML(k),'">',o.string.encodeHTML(r(k,26)),'</a><span class="f-gray ml-10">\u5927\u5c0f\uff1a',_(g.size),"</span>"],w>0&&"1"!=F.context("user").isAsker&&a.push('<span class="f-pipe">|</span><span class="f-gray">\u6240\u9700\u8d22\u5bcc\u503c\uff1a'+w+"</span>"),a.push('</p><p class="f-gray p-last f-green"><i class="i-solid-ok"></i> \u5df2\u7ecf\u8fc7\u767e\u5ea6\u5b89\u5168\u68c0\u6d4b,\u653e\u5fc3\u4e0b\u8f7d'),a.push('</p></div><a class="grid-r btn-42-file-down" target="_blank" href="#">'),a.push('<i class="i-file-down"></i>'),a.push("<div><b>\u70b9\u51fb\u4e0b\u8f7d</b><span>\u4e0b\u8f7d\u91cf\uff1a"+(t.shareMeta.downloadcnt||0)+"</span></div></a>"),a.push("</div></div>"),a=a.join(""),F.context("answer-file")[v]={error:!1,fileInfo:{fs_id:u,path:g.path,size:g.size,md5:g.md5,wealth:w}},o(i).parent().delegate(".file a","click",function(e){try{if(e.preventDefault(),w>0&&"1"!=F.context("user").isAsker&&"1"!=F.context("answers")[h].isCurrentUser){var t=function(e){var t=['<p class="mt-10 pl-10">',o.string.encodeHTML(r(g.server_filename,36)),'<span class="ml-10 f-aid">(',_(g.size),")</span><p>",'<div class="wealth-wraper"><p class="mb-10">\u4e0b\u8f7d\u6240\u9700\u8d22\u5bcc\u503c\uff1a<span class="f-bold">',w,"</span></p>","<p>\u60a8\u5269\u4f59\u7684\u8d22\u5bcc\u503c\uff1a",e,"</p></div>"];return t.join("")},i=!1,a={type:2014,action:"click",module:"question",wealth:w,wealthLess:i};c.fire("login.check",{isLogin:function(){var e=F.context("user").wealth?parseInt(F.context("user").wealth,10):0;w>e&&(i=!0);{var n=i?'<span class="f-orange f-bold">'+e+'</span><a target="_blank" class="ml-10 f-12" href="http://www.baidu.com/search/zhidao_help.html#\u77e5\u9053\u79ef\u5206">\u5982\u4f55\u8d5a\u53d6\u8d22\u5bcc\u503c</a>':'<span class="f-orange f-bold">'+e+"</span>",r=i?"btn-32-disabled":"btn-32-green",p=['<div class="tang-footer h-center mt-15"><a class="file-dbtn mr-10 btn ',r,'" href="#">\u4e0b\u8f7d</a>','<a class="file-cbtn ml-10 btn-32-white" href="#">\u53d6\u6d88</a></div>'].join(""),g=!1;new d({title:"\u4e0b\u8f7d\u6587\u4ef6",content:t(n)+p,width:460,height:260,buttons:[],open:function(){g||(g=!0,o(".tang-footer").delegate("a.file-dbtn","click",function(e){try{if(e.preventDefault(),l.send(o.extend(a,{pos:"accept-btn",isLogin:1})),!i){var t=window.open("about:blank"),n={cm:100675,qid:F.context("answers")[h].qid,rid:h,raid:m||0,fsid:u};c.fire("login.check",{isLogin:function(){new f({params:n,hasJump:!1,beforeJump:function(){t.location.href=s}}),c.fire("dialog.close")}})}}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:264})}}),o(".tang-footer").delegate("a.file-cbtn","click",function(e){try{e.preventDefault(),c.fire("dialog.close"),l.send(o.object.extend(a,{pos:"cancel-btn",isLogin:1})),i&&location.reload()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:277})}}),o(".tang-title").delegate("a.close-btn","click",function(){try{l.send(o.object.extend(a,{pos:"close-btn",isLogin:1})),i&&location.reload()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:288})}}))}})}},noLogin:function(){d.confirm(t("\u767b\u5f55\u540e\u67e5\u770b"),{title:"\u4e0b\u8f7d\u6587\u4ef6",width:460,height:260,buttons:[{text:"\u767b\u5f55\u4e0b\u8f7d",click:function(){try{c.fire("login.log"),l.send(o.object.extend(a,{pos:"accept-btn",isLogin:0})),c.fire("dialog.close")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:308})}}},{text:"\u53d6\u6d88",btnClass:"btn-32-white",click:function(){try{l.send(o.object.extend(a,{pos:"cancel-btn",isLogin:0})),c.fire("dialog.close")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:319})}}}],open:function(){o(".tang-title").delegate("a.close-btn","click",function(){try{l.send(o.object.extend(a,{pos:"close-btn",isLogin:0}))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:329})}})}})}})}else window.open(s);l.send({type:2014,url:this.href,wealth:w,action:"click",pos:"file-download"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/file/file.js",method:"",ln:346})}})}}else if(!x){p++;var y="1"==F.context("answers")[h].isCurrentUser?"\u60a8":"\u56de\u7b54\u8005",M="1"==F.context("answers")[h].isCurrentUser?"\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u6216\u5220\u9664\u3002":"";a=['<div class="file line mt-10 f-12 file-fail">','<span class="fail">\u5f88\u62b1\u6b49\uff0c',y,"\u4e0a\u4f20\u7684\u9644\u4ef6\u5df2\u5931\u6548",M,"</span>","</div>"].join(""),F.context("answer-file")[v]={error:!0,fileInfo:{}}}})}var j=n.parents("dd"),k=j.attr("createTime"),y=!k&&""==o.string(j.text()).trim()||k&&o.string(j.text()).trim()==k;j.hasClass("replyask-content")&&(y||"\u5220\u9664"==o.string(j.text()).trim())&&(a="<br />"+a);var M=g.find(".wgt-wenku-link");M&&M.length>0&&(n.after(M),M.show()),n.after(a).remove()})}function s(e){m.length&&o.ajax({url:"/api/pcs",type:"GET",data:{fsid:m.join(),uid:x.join(),shareid:u.join(),qid:v.join(),rid:w.join()},async:!0,dataType:"json",complete:function(t,i){if("success"==i){var a=o.json.parse(t.responseText);n(a)}else n();l.addKey({file:p+"/"+m.length,fileShow:g.length}),o.isFunction(e)&&e()}})}var o=e("common:widget/js/util/tangram/tangram.js"),l=e("common:widget/js/util/log/log.js"),r=e("common:widget/js/util/suffix-str/suffix-str.js"),c=e("common:widget/js/util/event/event.js"),f=e("common:widget/js/logic/submit/submit.js"),d=e("common:widget/js/ui/dialog/dialog.js");F.context("answer-file",{});var p=0,g=[],h=F.context("page").rankFile,m=[],u=[],w=[],v=[],x=[];o("file").each(function(e,t){if(!(e>9)){var i=o(t),a=i.parentsUntil(".answer").parent(".answer"),n=i.attr("fsid")||"",s=o.url.getQueryValue(i.attr("link"),"shareid"),l=a&&a.attr("id").match(/\d+/)[0],r=a&&F.context("answers")[l].qid,c=a&&F.context("answers")[l].uid||"";m.push(n),u.push(s),w.push(l),v.push(r),x.push(c),"0"==h?a.hasClass("answer-hide")||g.push(n):"1"==h&&(a.hasClass("answer-fold")||a.hasClass("answer-hide")||g.push(n))}});var b=function(e){e=e||"default";var t={icon_file_image:"jpg,jpeg,gif,bmp,png,jpe,cur,svg,svgz,tif,tiff,ico",icon_file_visio:"vsd,vsdx",icon_file_pdf:"pdf",icon_file_word:"doc,docx,ods,ots,odt,rtf,dot,dotx,odm",icon_file_excel:"xls,xlsx,xlt,xltx,csv",icon_file_text:"txt,html,htm,xhtml,xml,js,css",icon_file_music:"wma,wav,mp3,aac,ra,ram,mp2,ogg,aif,mpega,amr,mid,midi",icon_file_video:"wmv,rmvb,mpeg4,mpeg2,flv,avi,3gp,mpga,qt,rm,wmz,wmd,wvx,wmx,wm,swf,mpg,mp4,mkv,mpeg,mov",icon_file_powerpoint:"ppt,pptx,pps,pot,ppsx,potx",icon_file_ipa:"ipa",icon_file_exe:"exe,msi",icon_file_zip:"zip,rar,7z,tar,gz",icon_file_apk:"apk",icon_file_default:"default",icon_file_torrent:"torrent"},a={};for(i in t){var n=t[i].split(",");for(j in n)a.hasOwnProperty(n[j]),void 0==a[n[j]]&&(a[n[j]]=i)}return a[e.toLowerCase()]?a[e.toLowerCase()]:a["default"]},_=function(e){var t=["B","K","M","G","T"],i=Math.min(Math.max(Math.floor(Math.log(e)/Math.LN2/10),1),5);return Math.round(100*e/Math.pow(2,10*i))/100+t[i]};a.exports.init=s});
;define("question:widget/js/inner-link/inner-link.js",function(n,e,t){function i(n){var e={};a.each(o,function(t,i){var r=/\d*$/g.exec(t)[0],o=F.context("answers");if("undefined"!=typeof i&&0!=i.length&&!(o[r]&&o[r].insertLinkType>0)){var l=a("#"+t).html(),d=l.match(/<a[^>]*>.*?<\/a>/g);if(d)for(var c=0;c<d.length;c++)l=l.replace(d[c],"&&&_###"+c);if(a.array(i).each(function(n,i){if(""!=i&&l.indexOf(i)>-1&&!e[t+"-"+i]){e[t+"-"+i]=!0;var a=new RegExp(i,"g"),r=0;l=l.replace(a,function(e){return r++,4>r?'<a class="inner-link" href="#" target="_blank" rel="nofollow" data-word="'+n+'"></a>':e})}}),d)for(var c=0;c<d.length;c++)l=l.replace("&&&_###"+c,d[c]);l!=a("#"+t).html()&&a("#"+t).html(l).find(".inner-link").each(function(e,t){var r=i[a(t).data("word")];a(t).html(r).attr("href","http://www.baidu.com/s?wd="+encodeURIComponent(r)+"&hl_tag=textlink&tn=SE_hldp01350_v6v6zkg6").attr("log","pos:innerLink"),a(t).addClass(["decor-unline","decor-dotted","decor-none"][n]||"")})}}),a(".inner-link").size()&&r.addKey({innerlink:1},{action:"entrance"})}var a=n("common:widget/js/util/tangram/tangram.js"),r=n("common:widget/js/util/log/log.js"),o=(n("common:widget/js/util/event/event.js"),F.context("relateWords"));t.exports={init:i}});
;define("question:widget/js/select-search/select-search.js",function(e,t,n){function c(e){l(e||document.body).mouseup(function(e){var t=e.button;if(l.browser.ie<9?1==t:0==t){var n=e.target.id;setTimeout(function(){var e=Boolean(window.getSelection),t=e?window.getSelection():document.selection.createRange();g=(e?t+"":t.text).replace(/\n+/g,"|");var c,s=g.length,o=e?s&&t.getRangeAt(0):t;return c=i(o,e),c&&"selectsearch-icon"!=n&&d.send({type:2014,page:"question",action:"selectSearchShow",qid:F.context("page").qid,uid:F.context("user").uid,text:g||""}),2>s||s>200||"selectsearch-icon"==n||!c?r():(a(o,e,c),void(o=t=null))},25)}})}function i(e,t){if(t){var n=s(e.startContainer),c=s(e.endContainer);return null===n||null===c||n!=c?!1:n}var i=e.parentElement(),a=s(i);return a}function s(e){return l(e).attr(u)?e:l(e).parents("["+u+"]").get(0)}function a(e,t){var n,c=l("#selectsearch-icon");t?(c.size()||(c=l('<img id="selectsearch-icon"/>').attr({src:"http://img.baidu.com/img/iknow/qb/select-search.png",alt:"\u641c\u7d22"})),n=e.cloneRange(),n.collapse(!1),n.insertNode(c.get(0)),c.removeClass("selectsearch-hide"),n.detach()):(c.remove(),h=!1,n=e.duplicate(),n.collapse(!1),n.pasteHTML("<img id='selectsearch-icon' src='http://img.baidu.com/img/iknow/qb/select-search.png' alt='\u641c\u7d22'/>")),n=null,o()}function o(){h||(h=!0,l("#selectsearch-icon").click(function(){try{r(),d.send({type:2014,page:"question",action:"selectSearchClick",qid:F.context("page").qid,uid:F.context("user").uid,text:g||""}),window.open("//www.baidu.com/s?wd="+encodeURIComponent(g)+"&tn=SE_hldp00800_iw44c7tx&ie=utf-8&hl_tag=flayer")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/select-search/select-search.js",method:"",ln:112})}}))}function r(){l("#selectsearch-icon").addClass("selectsearch-hide")}var l=e("common:widget/js/util/tangram/tangram.js"),d=e("common:widget/js/util/log/log.js"),u="accuse",g="",h=!1,m=function(){try{c(l(".wgt-ask")),c(l(".answer"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/select-search/select-search.js",method:"",ln:19})}};n.exports.init=m});
;define("question:widget/js/thunder/thunder.js",function(e,t){var n=e("common:widget/js/util/tangram/tangram.js"),i=e("common:widget/js/util/log/log.js"),a=(e("common:widget/js/util/event/event.js"),e("common:widget/js/util/uri/uri.js")),d=e("common:widget/js/ui/dialog/dialog.js"),o=function(e){var t=null;try{t=new ActiveXObject("ThunderAgent.Agent")}catch(n){try{t=new ActiveXObject("ThunderAgent.Agent.1")}catch(n){}}if(t)try{return t.CallAddTask(e,"","",1,"",""),!0}catch(n){try{return t.AddTask(e,"","","","",1,1,10),t.CommitTasks(),!0}catch(n){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(e),!0}catch(n){}return!1},c=function(){var t=n(".thunder-wrap");t.size()&&(i.send({type:2014,page:"question",action:"pv",area:"thunder-link",total:t.size()}),i.addKey({hasThunder:1})),t.each(function(t,o){var c=n(o).data("link"),r=['<div class="thunder-con">','<a class="thunder-link cur-pointer" data-link="',c,'">',c,"</a>",'<a class="btn-24-white btn-thunder" data-link="',c,'">\u7acb\u5373\u4e0b\u8f7d</a>',"</div>",'<p class="f-12 f-gray ed2k-comment">','\u8bf7\u5b89\u88c5\u8fc5\u96f7\u540e\u70b9\u51fb\u4e0b\u8f7d\uff0c\u6216<span class="thunder-copy-link f-blue" data-clipboard-text="',c,'">\u590d\u5236\u94fe\u63a5</span>\u8fdb\u884c\u4e0b\u8f7d\u3002',"</p>"].join("");n(o).html(r),e.async("common:widget/js/ui/clipboard/clipboard.js",function(e){var t=new e(n(o).find(".thunder-copy-link")[0],{moviePath:a.clipboardSwf});t.on("mousedown",function(){i.send({type:2014,page:"question",area:"thunder-copy",action:"click"})}),t.on("complete",function(e){e.resetBridge(),d.alert("\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u8d34\u7248")})})})},r=function(e,t){try{i.send({type:2014,page:"question",area:e,action:"click"}),o(t)||d.alert("\u8bf7\u5b89\u88c5\u8fc5\u96f7\u540e\u70b9\u51fb\u4e0b\u8f7d\uff01")}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message,path:"question:widget/js/thunder/thunder.js",method:"",ln:110})}};t.init=function(){try{n(function(){n.browser.ie&&n.browser.ie<=6?setTimeout(function(){c()},300):c()}),n(".thunder-wrap").delegate(".thunder-link","click",function(e){try{e.preventDefault();var t=n(this).data("link");r("thunder-dw-link",t)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/thunder/thunder.js",method:"",ln:127})}}).delegate(".btn-thunder","click",function(e){try{e.preventDefault();var t=n(this).data("link");r("thunder-dw-btn",t)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/thunder/thunder.js",method:"",ln:131})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/thunder/thunder.js",method:"",ln:132})}}});
;define("question:widget/ad-right/ad-right.js",function(a){var e=a("common:widget/js/util/tangram/tangram.js"),t=a("common:widget/js/ui/carousel/carousel.js"),s=a("common:widget/js/util/log/log.js");a("common:widget/js/ui/lazyload/lazyload.js");var o=function(){try{!function(){var a,o=[],i=F.context("cmsRight");if("undefined"!=typeof i&&(!i||i.length)){s.addKey({cms_scroll:1}),e.each(i,function(a,e){if(e&&e.src){var t=['<a rel="nofollow" alog-alias="qb-cms-mask" log="page:question,pos:cms_scroll,index:',a,'" href="',e.url,'" target="_blank"',0!=a?' data-img="'+e.src+'"':"",">",0==a?'<img src="'+e.src+'" alt=""/>':"","</a>"].join("");o.push(t)}}),a=new t({items:o,controls:!0,indicators:!0,slide:function(a,t){var s=e(t.relatedTarget),o=s.find("a"),i=o.data("img");i&&o.html('<img src="'+i+'" alt=""/>')}}),a.render("#cms-mask");{var c=e("#cms-mask .carousel-misc"),n=e('<div class="cms-scroll-shadow"></div>').insertBefore(c),l=e("#cms-mask .carousel-control-left");e("#cms-mask .carousel-control-right")}l.css("left",(220-5*(2*i.length-1))/2+"px"),1==i.length&&(c.hide(),n.hide()),e("#cms-scroll").mouseenter(function(e){e.stopPropagation(),c.animate({top:140}),n.animate({top:140}),a.pause()}).mouseleave(function(e){e.stopPropagation(),c.animate({top:170}),n.animate({top:170}),a.cycle()}),e("#cms-scroll").click(function(){try{s.send({type:2014,page:"question",pos:"cms-scroll",action:"click"})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/ad-right/ad-right.js",method:"",ln:93})}})}}(),function(){var a=e(".evaluate-open"),t=e("#cms-scroll"),s="/s/case_sp_conf.js?v=20121025";0!=a.size()&&0!=t.size()&&e.getScript(s,function(){"undefined"!=typeof CaseSpreadConfig&&"object"!=!e.type(CaseSpreadConfig)&&a.each(function(a,s){var o,i=s.id.split("-")[1],c=F.context("answers")[i].user.openSiteId;if(c&&CaseSpreadConfig[c]&&(o=CaseSpreadConfig[c],"object"==e.type(o))){var n=e.string('<a href="#{url}" alog-alias="qb-cms-scroll" target="_blank"><img src="#{imgsrc}" /></a>').format(o);return e("#cms-company")?e("#cms-company").html(n):e("<div/>").addClass("mt-15").html(n).appendTo(t),!1}})})}()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/ad-right/ad-right.js",method:"",ln:129})}},i=function(){try{var a=e(".cms-slide-optimus a").attr("data-img");e(".cms-slide-optimus a").append("<img src="+a+" />")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/ad-right/ad-right.js",method:"",ln:134})}};e(".cms-slide-lazy").lazyload({appear:o}),e(".cms-slide-optimus").lazyload({appear:i})});
;define("question:widget/answers/answers.js",function(e,s,n){function a(){h.hasClass("folding")?(f&&(f.hide(),f.hasClass("folding")&&t()),r.addClass("answer-fold"),d.size()&&0==l.size()&&"0"==m&&d.hide(),h.removeClass("folding"),w.html("\u67e5\u770b\u66f4\u591a\u5176\u4ed6\u56de\u7b54<span></span>"),o.send({type:2014,area:"rank3",action:"foldclick"})):(f&&f.show(),r.removeClass("answer-fold").children().first().removeClass("line"),d.size()&&0==l.size()&&d.show(),h.addClass("folding"),w.html("\u6536\u8d77<span></span>"),o.send({type:2014,area:"rank3",action:"showfoldclick"}))}function t(){f.hasClass("folding")?(l.addClass("answer-hide"),d.size()&&"0"==m&&d.hide(),f.removeClass("folding"),c.html("\u67e5\u770b\u88ab\u9690\u85cf\u56de\u7b54<span></span>"),o.send({type:2014,area:"rank3",action:"hideclick"})):(l.removeClass("answer-hide").children().first().removeClass("line"),d.size()&&d.show(),f.addClass("folding"),c.html("\u6536\u8d77<span></span>"),o.send({type:2014,area:"rank3",action:"showhideclick"}))}var i=e("common:widget/js/util/tangram/tangram.js"),o=e("common:widget/js/util/log/log.js"),r=[],l=[],d=null,w=null,c=null,h=null,f=null,m=i.url.getQueryValue(location.search,"pn")||"0",g=function(){try{0==i(".wgt-best,.wgt-recommend,.wgt-special").size()&&i(".wgt-answers").size()&&i("#wgt-answers").removeClass("answer-foldable"),r=i(".answer-foldable .answer-fold"),l=i(".answer-hide"),d=i(".wgt-pager"),i("#wgt-answers").size()&&l.size()==i("#wgt-answers .answer").size()&&0==i("#wgt-answers .answer-mine").size()&&("0"==m?F.context("user").isAsker||i("#wgt-answers").hide():i("#wgt-answers").addClass("reply-hide-only")),(r.size()||l.size())&&d.size()&&"0"==m&&d.hide(),r.size()&&(h=i('<div id="show-fold-container"/>').insertBefore(r.get(0)),w=i('<div id="show-answer-fold"/>').html("\u67e5\u770b\u66f4\u591a\u5176\u4ed6\u56de\u7b54<span></span>").appendTo(h),w.click(function(e){try{a()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/answers/answers.js",method:"",ln:60})}}).mouseover(function(){i(this).addClass("hover")}).mouseout(function(){i(this).removeClass("hover")})),l.size()&&(f=i('<div id="show-hide-container"/>').insertBefore(l.get(0)),c=i('<div id="show-answer-hide"/>').html("\u67e5\u770b\u88ab\u9690\u85cf\u56de\u7b54<span></span>").appendTo(f),c.click(function(e){try{t()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/answers/answers.js",method:"",ln:74})}}).mouseover(function(){i(this).addClass("hover")}),i(c).mouseout(function(){i(this).removeClass("hover")}),h&&f.hide());var e=i.url.getQueryValue(location.href,"loc_ans");if(e){var s=i("#wgt-answers .answer"),n=null;s.each(function(s,a){-1!=i(a).attr("id").indexOf(e)&&(n=i(a))}),n&&(locAnswerFold=n.hasClass("answer-fold")&&i("#wgt-answers").hasClass("answer-foldable"),locAnswerHide=n.hasClass("answer-hide"),locAnswerFold&&a(),locAnswerHide&&t(),setTimeout(function(){i(document).scrollTop(n.offset().top-70)},200))}else{var g=i("#wgt-answers .answer-mine").eq(0),p=g.size()?g.parent().attr("id"):null,u=p&&g.parent().hasClass("answer-fold")&&i("#wgt-answers").hasClass("answer-foldable");myAnswerHide=p&&g.parent().hasClass("answer-hide"),p&&!(u||myAnswerHide&&r.size())&&setTimeout(function(){i(document).scrollTop(g.offset().top-70)},200),myAnswerHide&&0==r.size()&&t()}i(".hide-other-answer").click(function(){try{i(this).hide(),i(".answer-other").show(),o.send({pms:"otherAnswer",type:2014});var e=i(".no-bd");e.each(function(){i(this).removeClass("no-bd")})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"question:widget/answers/answers.js",method:"",ln:140})}})}catch(v){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:v.message,path:"question:widget/answers/answers.js",method:"",ln:141})}};n.exports.insertBest=function(){var e=F.context("answers"),s=[];i.object.each(e,function(e,n){s.push({timestamp:+e.c_timestamp,id:n})}),s.sort(function(e,s){return e.timestamp-s.timestamp}),i('<span class="btn-mark-green ml-5">\u6700\u5feb\u56de\u7b54</span>').appendTo(i("#answer-"+s[0].id).find(".info"))},g()});
;define("question:widget/ask/ask.js",function(e){function t(){var e,t;i("#modify-category").on("click",function(o){try{o.preventDefault(),e?e.open():(e=n.confirm('<div id="dig-modify-category"></div>',{title:"\u4fee\u6539\u5206\u7c7b",width:"465px",onaccept:function(){var o={cm:100015,qid:F.context("page").qid,cid_bef:F.context("page").cid,cid_aft:t.getValue().cid};return o.cid_bef==o.cid_aft?(e.close(),void n.alert("\u8f6c\u79fb\u524d\u540e\u7684\u5206\u7c7b\u76f8\u540c\u5662...",{onaccept:function(){e.open()},close:function(){e.open()}})):void new s({url:"/submit/user",params:o,beforeJump:function(){e.close();var t=new n({width:350,height:160,title:"\u77e5\u9053\u63d0\u793a",content:"\u8f6c\u79fb\u5206\u7c7b\u6210\u529f\u5566~~",autoDispose:!0,close:function(){window.location.reload(!0)}});setTimeout(function(){t.close()},2e3),i.cookie.set("IK_QB_ALTER",1)},syncId:"modifyCate",errorDeal:function(){e.close(),n.alert("\u8f6c\u79fb\u5206\u7c7b\u5931\u8d25\u4e86: (")}})}}),t=new c({target:"#dig-modify-category",defaultValue:F.context("page").cid,selectSize:16}))}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"question:widget/ask/ask.js",method:"",ln:94})}})}function o(){t()}{var i=e("common:widget/lib/jquery/jquery.js"),n=e("common:widget/js/ui/dialog/dialog.js"),c=e("common:widget/js/logic/category/category.js"),s=e("common:widget/js/logic/submit/submit.js");e("question:widget/js/getInfo/getInfo.js"),e("question:widget/js/inner-link/inner-link.js"),e("common:widget/js/util/log/log.js")}i.ajax({dataType:"jsonp",crossDomain:!0,url:"http://cp.zhidao.baidu.com/v.php?q="+F.context("page").qid,success:function(e){e=parseInt(e,10);var t=i("#v-times").html("|").show();i("<span/>").addClass("browse-times").html(" \u6d4f\u89c8"+e+"\u6b21").insertAfter(t)}});var a=F.context("cmsTopic"),d=F.context("answers");i(a).each(function(e,t){t.expert&&i(d).each(function(e,o){"undefined"!=typeof o.userName&&i.contains(t.expert.split(","),o.userName)&&(i("#cms-topic").size()?i("#cms-topic").attr("href",t.url).html(t.title):i("#ask-info").append('<span class="f-pipe">|</span> \u76f8\u5173\u4e13\u9898\uff1a<a id="cms-topic" rel="nofollow" href="'+t.url+'" target="_blank">'+t.title+"</a>"))})}),o()});
;define("question:widget/push/push.js",function(e,t){function i(e){if(e&&"object"==n.type(e))if(e.CPLN>0||c){(1==e.type||c)&&(n.cookie.set("CPLN",e.CPLN,d),n.cookie.set("CPOFF",e.CPOFF,d)),1==l&&e.CPLN<=8&&!c&&a.alert(['<div class="push-nochange f-yahei mt-20">',"<p>\u4e0d\u80fd\u518d\u6362\u4e00\u6279\u55bd: (</p>","<p>\u63a8\u8350\u7ed9\u60a8\u7684\u95ee\u9898\u5c31\u5269\u8fd9\u4e48\u591a\u4e86</p>",'<p class="push-nochange-gray">\u8bf7\u7ee7\u7eed\u7b54\u9898\u6216\u8005\u7a0d\u7b49\u67e5\u770b\u6211\u4eec\u4e3a\u60a8\u63a8\u8350\u7684\u65b0\u95ee\u9898: )</p>',"</div>"].join(""),{width:400,height:220});var t="";e.list&&!n.isEmptyObject(e.list)&&(n.each(e.list,function(i,s){t+="<li>",e.CPLN>0&&1==e.type&&!c&&(t+='<span style="visibility:hidden;" class="grid-r i-del mt-10 ml-5" id="push-del-'+s.qid+'" title="\u4e0d\u518d\u63a8\u8350"></span>'),c?(s.createTime&&(t+='<span class="create-time grid-r f-aid">'+s.createTime+"</span>"),t+='<span class="answer-num grid-r f-aid">'+s.answerNum+"\u56de\u7b54</span>"):t+='<span class="grid-r f-aid">'+s.answerNum+"\u56de\u7b54</span>",1==s.isHighValue&&(t+='<img class="grid pt-5 pr-5 pl-5" title="\u5f88\u591a\u4eba\u60f3\u77e5\u9053\u8fd9\u4e2a\u95ee\u9898\u7684\u7b54\u6848\uff0c\u671f\u5f85\u60a8\u7684\u5e2e\u52a9" width="18" height="16" align="absmiddle" alt="\u9700\u8981\u5e2e\u52a9" src="http://img.baidu.com/img/iknow/browse/icon-need-help.png" />'),s.score>0&&(t+='<i class="i-wealth-big"></i><span class="f-red mr-5">'+s.score+"</span>");var a=c?'log="pms:newqb,pos:pushlist,page:qb-new,isRepler:replyNum"':"";t+="<a "+a+' href="/question/'+s.qid+".html?push="+e.type+"&group="+s.expGroup+(e.rpRecommand?"&rpRecommand="+e.rpRecommand:"&rpRecommand=c")+'&entry=qb_qb_answer" target="_blank" title="'+s.title+'">'+n.string(s.title).subByte(60,"...")+"</a>",1==s.isFromWap&&(t+='<a class="i-from-wap ml-5" title="\u6765\u81ea\u624b\u673a\u77e5\u9053" href="/s/2011wapadv/index.html?fr=qbview&tab=1" target="_blank"></a>'),t+="</li>"}),n(".wgt-push .bd").eq(0).html(t)),o.init({key:2014,query:".wgt-push .bd a"})}else 1==p&&(n(".wgt-push .bd").html(['<p class="del-zero">',"\u63a8\u8350\u7ed9\u60a8\u7684\u95ee\u9898\u5df2\u7ecf\u5220\u5b8c\u4e86\uff01\u8bf7\u7ee7\u7eed\u7b54\u9898\u6216\u8005\u7a0d\u7b49\u67e5\u770b\u6211\u4eec\u4e3a\u60a8\u63a8\u8350\u7684\u65b0\u95ee\u9898\uff1a\uff09",'<a class="f-bold" href="http://zhidao.baidu.com/browse/?lm=2&fr=nw" target="_blank">\u73b0\u5728\u5c31\u53bb\u56de\u7b54&gt;&gt;</a>',"</p>"].join("")),n(".wgt-push .ft").empty())}function s(e){p=1,l=0;var t=n(e).attr("id").replace(/[^\d]/g,"");n.post("/submit/user","cm=100580&qid="+t,function(){n(n(e).parent()).fadeOut(800,function(){var e=n(".wgt-push ul li").filter(function(){return"none"!=n(this).css("display")&&0!=n(this).css("opacity")});0==e.size()&&n.get("/question/api/recommend?rn=5&type=1&t="+ +new Date,i,"json")})},"json")}var n=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/ui/dialog/dialog.js"),o=e("common:widget/js/util/log/log.js"),l=0,p=0,d={path:"/",expires:"",domain:location.host.replace(/:\d+/,"")},c="1"==F.context("user").isReplyer?!0:!1;t.init=function(e,t){try{c?n.get("/question/api/recommend?rn=5&cid="+e+"&title="+encodeURIComponent(t)+"&t="+ +new Date,i,"json"):n(".wgt-push ul").delegate(".i-del","click",function(e){try{s(this),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/push/push.js",method:"",ln:140})}}).delegate(".i-del","mouseover",function(){n(this).addClass("i-del-hover")}).delegate(".i-del","mouseout",function(){n(this).removeClass("i-del-hover")}).delegate("li","mousemove",function(){n(this).find(".i-del").css("visibility","visible")}).delegate("li","mouseleave",function(){n(this).find(".i-del").css("visibility","hidden")}),n("#push-change").click(function(s){try{s.preventDefault(),l=1,p=0,c?n.get("/question/api/recommend?rn=5&cid="+e+"&title="+encodeURIComponent(t)+"&t="+ +new Date,i,"json"):n.get("/question/api/recommend?rn=5&t="+ +new Date,i,"json")}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"question:widget/push/push.js",method:"",ln:165})}}),o.addKey({push:"1"})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/push/push.js",method:"",ln:169})}}});
;define("question:widget/replyer-best/replyer-best.js",function(e,t,s){var n=e("common:widget/js/util/tangram/tangram.js"),o=e("common:widget/js/ui/tip/tip.js"),a=(e("common:widget/js/util/event/event.js"),e("common:widget/js/util/log/log.js"));s.exports.init=function(e){function t(e){var o=e.data,a=s[o.index],i=a?a.getTipContainer().get(0):"";n.contains(i,e.target)||e.target==o.elem||(a&&a.hide(),n(window).unbind("mousemove",t))}try{var s=[],i=[],p={},r=n(["#best-answer-"+e,"#special-answer-"+e,"#recommend-answer-"+e].join(",")).find(".wgt-replyer-best"),m=["<p>\u5ba2\u670d<strong>#{officialTotalNum}</strong>\u4eba</p><p>\u5df2\u56de\u7b54\u4e13\u4e1a\u95ee\u9898<strong>#{openTotAns}</strong>\u4e2a</p>",'<p><strong>#{openAnswerTimeStr}</strong></p><p style="color:#999;">\u8fd17\u5929\u5e73\u5747\u56de\u7b54\u54cd\u5e94\u65f6\u95f4</p>',['<div class="osite-rate"><p><span class="w40">\u5f88\u6ee1\u610f</span><span class="osite-rate-bar"><em style="width:#{openSatisBestRate}%;"></em></span><span>#{openSatisBestRate}%</span></p>','<p><span class="w40">\u6ee1\u610f</span><span class="osite-rate-bar"><em style="width:#{openSatisGoodRate}%;"></em></span><span>#{openSatisGoodRate}%</span></p>','<p><span class="w40">\u4e0d\u6ee1\u610f</span><span class="osite-rate-bar osite-rate-bar-gray"><em style="width:#{openSatisBadRate}%;"></em></span><span>#{openSatisBadRate}%</span></p>','<p style="color:#999;text-align:center;">\u8fd17\u5929\u88ab\u8bc4\u4ef7\u5171#{openSatisCommentCnt}\u6b21</p></div>'].join("")],l=F.context("answers")[e];if(!l)return;n(["openOfficialNum","openAdminNum","openAssociateNum","openAnswerTime","openAnswerTimeStr","openSatisRate","openSatisBestRate","openSatisGoodRate","openSatisBadRate","openSatisCommentCnt","openTotAns"]).each(function(){p[this]=l.user[this]||""}),p.officialTotalNum=parseInt(p.openOfficialNum)+parseInt(p.openAdminNum)+parseInt(p.openAssociateNum)||0,r.find(".osite-answered, .osite-speed, .osite-satisfied-rate").each(function(e){var a=this;n(this).mouseenter(function(){clearTimeout(i[e]),i[e]=setTimeout(function(){s[e]||(s[e]=new o({target:a,tooltipClass:"tip-white osite-info-tip",autoDispose:!1,direction:"top",content:n.string(m[e]).format(p)})),s[e].show()},70)}).mouseleave(function(s){clearTimeout(i[e]),i[e]=setTimeout(function(){n(window).bind("mousemove",{index:e,elem:a},t),t(n.extend(s,{data:{index:e,elem:a}}))},200)})}),a.addKey({"company-info-show":1}),r.find(".osite-arrow-up").attr("title","\u6536\u8d77").click(function(){try{var e="osite-arrow-up"==this.className;this.className="osite-arrow-"+(e?"down":"up"),this.setAttribute("title",e?"\u5c55\u5f00":"\u6536\u8d77"),n(".ad-site-left-info")[e?"slideUp":"slideDown"]()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/replyer-best/replyer-best.js",method:"",ln:99})}})}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message,path:"question:widget/replyer-best/replyer-best.js",method:"",ln:100})}}});
;define("question:widget/share/share.js",function(t){var e=t("common:widget/js/util/tangram/tangram.js"),a=t("common:widget/js/util/log/log.js"),o=t("common:widget/js/util/event/event.js"),s=t("common:widget/js/ui/dialog/dialog.js"),i=t("common:widget/js/util/uri/uri.js"),n=function(){try{var t="http://zhidao.baidu.com/question/"+F.context("page").qid+".html",n="";n="1"==F.context("page").isAdopted?"\u6211\u521a\u521a\u53d1\u73b0\u4e86\u4e00\u6761\u7279\u522b\u6709\u610f\u601d\u7684\u7cbe\u5f69\u95ee\u7b54\uff0c\u5c0f\u4f19\u4f34\u4eec\u90fd\u6765\u56f4\u89c2\u4e00\u4e0b\u5427\u3002\u3010\u95ee\uff1a"+F.context("page").title+"\u3011\uff08\u5206\u4eab\u81ea@\u767e\u5ea6\u77e5\u9053\uff09":"\u8fd9\u6761\u63d0\u95ee\u592a\u6709\u610f\u601d\u4e86\uff0c\u5c0f\u4f19\u4f34\u4eec\uff0c\u4f60\u4eec\u80fd\u6765\u56de\u7b54\u4e00\u4e0b\u5417\uff1f\u3010\u95ee\uff1a"+F.context("page").title+"\u3011\uff08\u5206\u4eab\u81ea@\u767e\u5ea6\u77e5\u9053\uff09";var r={text:n,url:t,pic:"http://img.baidu.com/img/logo-zhidao.gif"};e("#bdshare").attr("data",e.json.stringify(r));e("#bdshell_js").attr("src"," http://share.baidu.com/static/js/shell_v2.js?t="+(new Date).getHours()),e("#bdshare").find("a").each(function(a,o){e(o).on("click",function(){try{t+="&fr=qb_"+e(o).attr("class"),r.url=t,e("#bdshare").attr("data",e.json.stringify(r))}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"question:widget/share/share.js",method:"",ln:38})}})}),o.on("share.asktoteam",function(){var t=F.context("page")["share.asktoteam.dialog"];t&&t.show?(t.show(),t.center()):F.context("page")["share.asktoteam.dialog"]=t=s.iframe({title:"\u5411\u56e2\u961f\u6c42\u52a9",content:i.qbasktoteam,width:430,height:320,autoDispose:!1,autoRender:!0})}),e("#ask-to-team").click(function(t){try{a.send({type:2014,area:"share",action:"team"}),o.fire("share.asktoteam"),t.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/share/share.js",method:"",ln:63})}})}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message,path:"question:widget/share/share.js",method:"",ln:64})}},r=!1;e("#wgt-share").offset().top<=e(window).scrollTop()+e(window).height()?(n(),r=!0):e(window).scroll(function(){var t=e(window).scrollTop()+e(window).height();!r&&t>e("#wgt-share").offset().top-150&&(r=!0,n())})});
;define("question:widget/value-comment/value-comment.js",function(e,t,n){var a=e("common:widget/js/util/tangram/tangram.js"),o=e("question:widget/js/comment/comment.js"),s=e("question:widget/js/evaluate/evaluate.js"),i=e("question:widget/js/evaluate/open/open.js");n.exports.init=function(e){try{var t=null,n=null,m=a("#comment-"+e),u=a("#evaluate-"+e);m.size()&&(t=new o({target:m})),u.size()&&(n=u.hasClass("evaluate-open")?new i({type:1,target:u}):new s({type:0,target:u}))}catch(l){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:l.message,path:"question:widget/value-comment/value-comment.js",method:"",ln:36})}}});
;define("question:widget/related/related.js",function(e,t,a){var i=e("common:widget/js/util/tangram/tangram.js"),d=e("common:widget/js/util/log/log.js"),n=(e("common:widget/js/util/event/event.js"),e("common:widget/js/logic/file-type/file-type.js")),o=e("question:widget/js/ck/ck.js");a.exports=function(e){i("#wgt-related .file-unknow-1").each(function(){var e=n(i(this).html()).fileClass;i(this)[0].className=e+"-1"}),e.relatedLogType&&d.addKey({relate_type:e.relatedLogType}),d.addKey({relate:"1"}),e.isLog&&d.addKey({showjy:i("#wgt-related #related-exp").size()?1:2}),e.wendarq_eid&&d.addKey({wendarq_eid:e.wendarq_eid});var t;i(".exp-img-back").mouseenter(function(){var e=i(this);clearTimeout(t),t=setTimeout(function(){e.find(".exp-img-wall").animate({height:55},200).find("s").animate({opacity:.96},300)},200)}).mouseleave(function(){clearTimeout(t),i(this).find(".exp-img-wall").animate({height:0},200).find("s").animate({opacity:0},300)}).click(function(e){try{e.preventDefault(),window.open(this.getAttribute("href"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/related/related.js",method:"",ln:53})}}),/^[1-4]$/.test(e.cmsRelq)&&d.addKey({qb_relq:e.cmsRelq}),(1==e.cmsRelqrl||2==e.cmsRelqrl)&&d.addKey({pc_qb_relqrl:e.cmsRelqrl});var a=[];i("#wgt-related a[data-qid]").each(function(){a.push(i(this).data("qid"))}),F.context("page").relateQids=a.join("_")};var s=i(".ec-oad","#wgt-related");if(s.size()){var l=d.parse(s.find("a").data("log")),r=s.data("href");r&&(r+="&attach="+encodeURIComponent("r="+l.si),d.log(r)),s.find("a").each(function(){this.href+=(2==l.st?"&us=":"&attach=")+encodeURIComponent("r="+l.si)}),o.bind(s);var c=s.data("oad");c&&(c=c.split("_"),d.addKey({oadqid:c[4]||"",oadpos:c[5]||""}))}});
;define("question:widget/s-yesorno/s-yesorno.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js"),o=e("common:widget/js/ui/pie/pie.js"),s=e("common:widget/js/util/log/log.js");t(".pie-holder","#yn-tab").each(function(){var e=t(this),s=.01*parseInt(e.text()),i=e.find("em").css("color");e.prepend(new o({pieR:28,donutR:24,rotation:-90,strokeWidth:0,slices:[{color:i,percent:s},{color:"#E6E9E0",percent:1-s}]}).getNode())}),t("li","#yn-tab").click(function(){try{var e=t(this),o=e.data("type");if(e.is(".cur,.disabled"))return;var i=e.addClass("cur bt-"+o).siblings(".cur");i.removeClass("cur bt-"+i.data("type")),t("#yn-list").children().hide(),t("#list-"+o).show(),s.send({action:"click",area:"yesno",pos:"tab",tab:o})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message,path:"question:widget/s-yesorno/s-yesorno.js",method:"",ln:40})}})});
;define("question:widget/s-recommend/s-recommend.js",function(e,s){var t=e("common:widget/js/util/tangram/tangram.js"),n=e("common:widget/js/util/log/log.js");s.init=function(){try{var e=t(".item-hide");t("#wgt-s-recommend .expand").on("click",function(){try{t(this).hasClass("collapse")?(t(this).removeClass("collapse"),e.hide(),t(this).find("span").text("\u5c55\u5f00\u66f4\u591a")):(n.send({pos:"s_recommend_expand",action:"click",page:"qb-new"}),t(this).addClass("collapse"),e.show(),t(this).find("span").text("\u6536\u8d77\u5168\u90e8"))}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"question:widget/s-recommend/s-recommend.js",method:"",ln:21})}})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"question:widget/s-recommend/s-recommend.js",method:"",ln:22})}}});
;define("question:widget/js/xiaozhi/xiaozhi.js",function(i,e,t){var o=i("common:widget/js/util/tangram/tangram.js"),s=i("common:widget/js/ui/base/base.js"),a=i("common:widget/js/util/store/store.js"),n=i("common:widget/js/util/log/log.js"),r=i("common:widget/js/util/event/event.js"),d=i("common:widget/js/ui/tip/tip.js"),c=(i("common:widget/js/ui/dialog/dialog.js"),16153),p=[{num:0,cls:"img-pitiful",offset:[-28,-20],tip:"\u9002\u5f53\u4ed8\u51fa\u4e00\u70b9\uff0c\u5c31\u53ef\u4ee5\u62ff\u5956\u52b1\u54e6\uff01\u5feb\u6765\u505a\u4efb\u52a1\u5427~"},{num:1,cls:"img-grievance",offset:[0,-20],tip:"\u60f3\u4e00\u4e2a\u4eba\u65f6\u597d\u5b64\u5355\uff0c\u6b64\u523b\u7684\u6211\u591a\u4e48\u60f3\u4f60\u6765\u5b8c\u6210\u672c\u5468\u4efb\u52a1\u5440"},{num:2,cls:"img-cried",left:"-2",offset:[0,2],tip:"\u9694\u58c1\u8001\u738b\u5bb6\u516c\u9e21\u90fd\u4e0b\u86cb\u4e86\uff0c\u54b1\u4e5f\u5feb\u628a\u8fd9\u4e2a\u4efb\u52a1\u505a\u4e86\u5440~"},{num:3,cls:"img-pitiful",offset:[0,-20],tip:"\u65f6\u95f4\u8f6c\u77ac\u5373\u901d\uff0c\u73cd\u60dc\u8fd9\u4e00\u523b\uff0c\u5feb\u6765\u5b8c\u6210\u4efb\u52a1\u5427\uff1a\uff09"},{num:4,cls:"img-cried",left:"-2",offset:[0,2],tip:"\u5feb\u6765\u505a\u4efb\u52a1\u5427\uff0c\u5956\u52b1\u7ecf\u4e0d\u8d77\u7b49\u5f85\uff0c\u5c31\u50cf\u9752\u6625\u7ecf\u4e0d\u8d77\u8f9c\u8d1f"},{num:5,cls:"img-grievance",offset:[0,-20],tip:"\u7ed9\u5956\u52b1\u4e0d\u662f\u95ee\u9898\uff0c\u95ee\u9898\u662f\u54b1\u8fd8\u6ca1\u505a\u5b8c\u4efb\u52a1\u5462~"},{num:6,cls:"img-sick",left:-4,offset:[0,-10],tip:"\u545c\u545c... \u4f60\u4e0d\u505a\u4efb\u52a1\uff0c\u6211\u5c31\u5403\u4e0d\u597d\u7761\u4e0d\u597d\uff0c\u53ea\u80fd\u5f97\u76f8\u601d\u75c5\u4e86\u2026"},{num:7,cls:"img-gold",left:-8,offset:[0,10],tip:'\u987a\u5229\u5b8c\u6210\u672c\u5468\u4efb\u52a1\uff0c<em class="f-orange f-bold">\u83b710\u8d22\u5bcc\u503c</em>\u5956\u52b1\uff0c\u4e0b\u5468\u8fd8\u6709\u65b0\u4efb\u52a1\u54e6\uff0c\u8bb0\u5f97\u518d\u6765\u770b\u6211~'},{num:8,cls:"img-happy",offset:[0,10],tip:'\u987a\u5229\u5b8c\u6210\u672c\u5468\u4efb\u52a1\uff0c<em class="f-orange f-bold">\u83b710\u8d22\u5bcc\u503c</em>\u5956\u52b1\uff0c\u4e0b\u5468\u8fd8\u6709\u65b0\u4efb\u52a1\u54e6\uff0c\u8bb0\u5f97\u518d\u6765\u770b\u6211~'},{num:9,cls:"img-pitiful",offset:[0,-20],tip:'<a href="http://zhidao.baidu.com/s/zhima.html" target="_blank">\u829d\u9ebb</a>\uff0c\u795e\u9a6c\u90fd\u77e5\u9053\uff01<br/>\u5feb\u6765\u6210\u4e3a\u6211\u4eec\u4e2d\u7684\u4e00\u5458\u5427\uff01'}],h=['<div class="wgt-xiaozhi">','<div class="xiaozhi-avatar #{cls}">','<s class="xiaozhi-hide pop-cross"></s>',"</div>",'<div class="xiaozhi-pop pop-bubble" style="left:#{left}px">','<span class="f-yahei f-12#{popTextCls}">#{tip}</span>','<a class="btn-24-green">\u505a\u4efb\u52a1</a>',"</div>",'<div class="xiaozhi-progressbar">','<em class="progress-line" style="width:#{progress}%;"></em>','<div class="ui-tooltip ui-widget ui-corner-all ui-widget-content tip-shadow tip-radius">','<div class="ui-tooltip-content">#{progress}%</div>','<div class="tip-arrow tip-arrow-top" style="left: 10px;">',"<em></em><span></span>","</div>","</div>","</div>","</div>"].join(""),l=['<div class="wgt-xiaozhi-dig f-yahei">','<s class="pop-cross xiaozhi-hide"></s>','<div class="xiaozhi-dig-title">',"<p>\u4efb\u52a1\u5956\u52b1\uff1a</p>",'<p class="f-bold">\u5b8c\u6210\u4efb\u52a1\u5373\u53ef\u83b7\u5f97#{score}\u8d22\u5bcc\u503c</p>',"</div>",'<div class="xiaozhi-dig-main">','<div class="xiaozhi-dig-item mr-15 pt-15">',"<h2>\u4efb\u52a1\u5185\u5bb9<em>1</em></h2>",'<div class="font-middle f-16 mt-10">','<p class="f-16"><span>#{taskStr1}</span></p>',"</div>","#{done1}","</div>",'<div class="xiaozhi-dig-item pt-15">',"<h2>\u4efb\u52a1\u5185\u5bb9<em>2</em></h2>",'<div class="font-middle f-16 mt-10">','<p class="f-16"><span>#{taskStr2}</span></p>',"</div>","#{done2}","</div>","</div>",'<div class="xiaozhi-dig-btns mt-15">#{actStr}</div>',"</div>"].join(""),g=s(function(i){var e=this;e.options=o.extend({container:o("#menu"),closeWait:3e4,offset:[454,2]},i),e.isShow=window.screen.width>=1280,e.weekPv=0,e.isActiveRequest=!0,e.progress=parseInt(i.progress),e.baseUrl="http://act.zhidao.baidu.com/?xiaozhi",e.monday=e.getMonday(1e3*i.now),e.week=i.taskWeek,a.get("IK_XIAOZHI_TW")||n.addKey({new_xiaozhi:1}),e.monday==c&&a.set("IK_XIAOZHI_PV",0),""!=a.get("IK_XIAOZHI_TW")&&e.monday!=a.get("IK_XIAOZHI_TW")?(a.set("IK_XIAOZHI_PV",0),a.set("IK_XIAOZHI_TW",e.monday),o.cookie.set("IK_XIAOZHI","close",{expires:-1})):e.weekPv=+a.get("IK_XIAOZHI_PV"),1280==window.screen.width&&(r.on("comment.focus",function(){e.hide()}),r.on("editor.focus",function(){e.hide()}))}).extend({init:function(){try{var i=this;if(!i.isShow)return;if(i.monday==i.week&&100==i.progress)o.cookie.set("IK_XIAOZHI","close"),i.render(i.xzData=p[8]),o(".xiaozhi-min").unbind("click").on("click",function(e){try{e.stopPropagation(),i.show(),o(".wgt-xiaozhi").css("cursor","default")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:195})}}).find(".btn-24-green").remove(),o(".xiaozhi-progressbar").hide(),i.tip("hide"),o(".xiaozhi-min").mouseenter(function(){var e=o(".xiaozhi-min").size()?"show":"hide";i.doneTip.getTipContainer()[e](),i.doneTip.getTipContainer().find(".tip-arrow").css({left:"80px"}),i.foo()}).mouseleave(function(){i.doneTip.getTipContainer().hide()}),i.locate();else{a.set("IK_XIAOZHI_PV",i.weekPv+=1);var e=Math.floor(i.weekPv/5);i.render(i.monday==c?i.xzData=p[9]:i.xzData=p[e>6?6:e]),i.progressbar(),i._autoInter=setTimeout(function(){i.hide()},3e4),n.addKey({xiaozhi:1})}}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:230})}},getMonday:function(i){var e=0;if(0==parseInt(i/1e3))return e;var t=new Date(i).getDay();e=i-864e5*(t-(t?1:-6));var s=o.date.format(new Date(e),"yyyy/MM/dd");return e=new Date(s+" 18:00:00").getTime()/1e3,Math.floor(e/86400)},render:function(i){var e=this;i.left||(i.left=-25),(8==i.num||7==i.num)&&(i.popTextCls=" mt-10"),i.progress=e.progress||0,o(o.string.format(h,i)).click(function(i){try{i.stopPropagation();var t=o(this).hasClass("xiaozhi-min");n.send({type:2014,pos:t?"xiaozhi-icon":"xiaozhi-task",action:"click",uname:F.context("user").name}),e[t?"show":"taskPop"](),clearTimeout(e._autoInter)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:268})}}).appendTo(e.options.container),e.monday==c&&(o(".xiaozhi-pop .btn-24-green").text("\u7b54\u9898\u53d8\u829d\u9ebb").css({"margin-left":"-11px",padding:"0 12px"}),o(".xiaozhi-pop a[href]").click(function(i){try{i.stopPropagation()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:277})}})),o(".wgt-xiaozhi .xiaozhi-hide").click(function(i){try{i.stopPropagation(),e.hide(),o.cookie.set("IK_XIAOZHI","close"),n.send({type:2014,pos:"xiaozhi-hide",action:"click",uname:F.context("user").name})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:291})}}),e.locate(),"close"==o.cookie.get("IK_XIAOZHI")?e.hide():e.show()},show:function(){var i=o(".wgt-xiaozhi"),e=i.find(".xiaozhi-avatar").width();o.cookie.set("IK_XIAOZHI",-1,{expires:-1}),i.removeClass("xiaozhi-min").css({width:e+"px",display:"block"}),100==this.progress&&this.doneTip&&this.doneTip.getTipContainer().hide(),this.progressbar(),this.foo()},hide:function(){var i=o(".wgt-xiaozhi");i.addClass("xiaozhi-min").css({width:"46px",cursor:"pointer"}),o(".xiaozhi-progressbar").hide(),this.foo(),clearTimeout(this._autoInter)},pop:function(i){o(".wgt-xiaozhi-dig, .wgt-back-wall").remove();var e=this,t=o(window),s="",a=i.detail.act;o(a).each(function(i){"###"==this.url&&(e.isActiveRequest=!1),s+=o.string('<a class="btn-32-#{cls}"#{outer}>#{val}</a>').format({cls:(1==this.value?"disabled":"green")+(0==i?" btn-pipe":""),val:1==this.value?"\u5df2\u5b8c\u6210":this.name,outer:e.isActiveRequest||1!=i?1==this.value?"":' href="'+this.url+'" target="_blank"':' id="xz-actsub-btn"'})});{var n=o(o.string(l).format({score:i.detail.prize[0].num,taskStr1:(a[0].display||"").replace(/\%[s]/g,a[0].num),done1:1==a[0].value?"<s></s>":"",taskStr2:(a[1].display||"").replace(/\%[s]/g,a[1].num),done2:1==a[1].value?"<s></s>":"",actStr:s})).appendTo(document.body);o("<div />").addClass("wgt-back-wall").appendTo(document.body)}n.find(".xiaozhi-dig-btns a").each(function(t){o(this).hasClass("btn-32-green")&&o(this).on("click",function(){try{1!=t||e.isActiveRequest?o.sio(e.baseUrl+"&cmd=2&vtype="+i.detail.act[t].key).callByServer(function(){e.delayGet()}):e.delayGet(13)}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:382})}})}),n.css({left:(t.width()-640)/2+"px"}).find(".xiaozhi-hide").on("click",function(){try{o(this).parent().remove(),o(".wgt-back-wall").remove()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"question:widget/js/xiaozhi/xiaozhi.js",method:"",ln:391})}});var r;o(window).unbind("resize").on("resize",function(){clearTimeout(r),setTimeout(function(){var i=(o(window).width()-640)/2;n.css("left",(0>i?0:i)+"px")},30)})},progressbar:function(){var i=this,e=o(".xiaozhi-progressbar");0==o(".xiaozhi-min").size()&&a.get("IK_XIAOZHI_TW")&&i.monday==i.week&&i.progress>0&&i.progress<100?(e.show().find("em").width(i.progress+"%"),o(".xiaozhi-progressbar .ui-tooltip").show().css("left",i.progress-22+"%")):o(".xiaozhi-progressbar").hide()},delayGet:function(i){var e=this;setTimeout(function(){o(document.body).on("mousemove",function(){o(document.body).unbind("mousemove"),e.taskPop(function(t){if(0==t.status){var s=t&&t.data&&t.data.detail&&t.data.detail.act;!e.isActiveRequest&&1e3>i&&s&&s[1]&&0==s[1].value?(o(".xiaozhi-errtip").remove(),o("<span />").css({"margin-right":"35px",color:"red"}).addClass("xiaozhi-errtip grid-r f-12").text("\u8fd8\u6ca1\u6709\u56de\u7b54\u5462").appendTo(".xiaozhi-dig-btns")):(t=t.data,t.profile&&t.profile.actLength==t.profile.userStatus?(e.done(),setTimeout(function(){o(".wgt-xiaozhi-dig, .wgt-back-wall").remove()},3e3)):e.taskPop())}})}),1e3>i&&o(document.body).mousemove()},i||1e3)},done:function(){var i=this;clearTimeout(this._autoInter),o(".wgt-xiaozhi").remove(),i.xzData=i.render(p[7]),o(".wgt-xiaozhi").unbind("click").css({cursor:"default"}).find(".btn-24-green").remove(),0==o(".xiaozhi-dig-btns .btn-32-green").size()&&(i.progress=100,i.progressbar()),i._autoInter=setTimeout(function(){i.hide(),i.tip()},17e3)},tip:function(i){var e=this;return e.doneTip||(e.doneTip=new d({tooltipClass:"xiaozhi-tip-green",direction:"bottom",autoDispose:!0,position:{my:"right+30 bottom-10",at:"left top"},content:'<span class="f-yahei f-12">\u6211\u5728\u517b\u7cbe\u84c4\u9510\uff0c\u4e0b\u5468\u518d\u89c1\u54e6~</span>',target:o(".xiaozhi-min")[0]})),e.doneTip.getTipContainer().find(".tip-arrow").css({left:"80px"}),"hide"==i&&e.doneTip.getTipContainer().hide(),e.doneTip},taskPop:function(i){var e=this;o.sio(e.baseUrl+"&cmd=1").callByServer(function(t){0==t.status&&(e.week=e.monday,e.pop(t.data),e.progressbar()),o.isFunction(i)&&i.call(e,t)})},foo:function(){var i=this.options.container,e=i.find(".wgt-xiaozhi"),t=o(window),s=o(".xiaozhi-min").size()>0,a=e.offset(),n=e.width(),r=o(window).scrollTop()+(t.height()-e.height()-(F.context("page").isView?210:130)),d=-(136>n?n+(136-n)/2+3:n+2),c=o("#menu").height()+o("#body").height(),p=r+o("#menu").height()+e.height();e.css({top:(c>p?r:c-e.height()-38)+"px",left:(s?-46:d)+"px"}),this.doneTip&&this.doneTip.getTipContainer().css({left:a.left-76+"px",top:a.top-62+"px"}).find(".tip-arrow").css({left:"80px"})},locate:function(){function i(){e.foo()}var e=this;o(window).unbind("resize scroll",i).on("resize scroll",i),i()}});t.exports=g});
;define("question:widget/js/left-promotion/left-promotion.js",function(o,t,e){var n=o("common:widget/lib/jquery/jquery.js"),i=o("common:widget/js/ui/base/base.js"),s=o("common:widget/js/util/event/event.js"),c=o("common:widget/js/util/log/log.js"),l=i(function(o){var t=this,e={closeBtnOffset:{right:0,top:0}};n.each(n.extend(e,o),function(o,e){n.isFunction(e)&&t.on(o,e)}),t.opt=e}).extend({init:function(){try{var o=this,t=n(".qb-section");setTimeout(function(){n("<div/>").prop({"class":"left-promotion",id:"left-promotion"}).html(['<div class="close-layer"></div>','<img src="'+o.opt.imgSrc+'"/>'].join("")).css({left:t.offset().left-120,top:.95*(n(window).height()-180)}).appendTo("#body"),n("#left-promotion .close-layer").css(o.opt.closeBtnOffset),o.eventHandler()},1500)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"question:widget/js/left-promotion/left-promotion.js",method:"",ln:66})}},eventHandler:function(){var o=this,t=n(".qb-section");n(window).on("resize",function(){var o=.95*(n(window).height()-180);n(".bottom-ask-con").size()&&(o=.95*(n(window).height()-280)),n("#left-promotion").css({left:t.offset().left-120,top:o})}),n(".left-promotion").click(function(t){try{var e=n(t.target).closest(".close-layer").size();c.send({type:2015,pos:e>0?"left-promotion-close":"left-promotion-click",action:"click",uname:F.context("user").name}),e?o.close():window.open(o.opt.url,"_blank")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/js/left-promotion/left-promotion.js",method:"",ln:98})}}),s.on("bottomAsk.show",function(){n("#left-promotion").css({top:.95*(n(window).height()-280)})}),s.on("bottomAsk.hide",function(){n("#left-promotion").css({top:.95*(n(window).height()-180)})})},close:function(){n("#left-promotion").remove()}});e.exports=l});
;define("question:widget/js/getInfo/getInfo.js",function(r,n,t){function o(r){var n,t,o,e,f,i,a,c,m,l=Array(),A=7,x=12,j=17,p=22,w=5,y=9,I=14,b=20,q=4,L=11,k=16,z=23,B=6,D=10,E=15,F=21;for(r=S(r),l=v(r),i=1732584193,a=4023233417,c=2562383102,m=271733878,n=0;n<l.length;n+=16)t=i,o=a,e=c,f=m,i=g(i,a,c,m,l[n+0],A,3614090360),m=g(m,i,a,c,l[n+1],x,3905402710),c=g(c,m,i,a,l[n+2],j,606105819),a=g(a,c,m,i,l[n+3],p,3250441966),i=g(i,a,c,m,l[n+4],A,4118548399),m=g(m,i,a,c,l[n+5],x,1200080426),c=g(c,m,i,a,l[n+6],j,2821735955),a=g(a,c,m,i,l[n+7],p,4249261313),i=g(i,a,c,m,l[n+8],A,1770035416),m=g(m,i,a,c,l[n+9],x,2336552879),c=g(c,m,i,a,l[n+10],j,4294925233),a=g(a,c,m,i,l[n+11],p,2304563134),i=g(i,a,c,m,l[n+12],A,1804603682),m=g(m,i,a,c,l[n+13],x,4254626195),c=g(c,m,i,a,l[n+14],j,2792965006),a=g(a,c,m,i,l[n+15],p,1236535329),i=C(i,a,c,m,l[n+1],w,4129170786),m=C(m,i,a,c,l[n+6],y,3225465664),c=C(c,m,i,a,l[n+11],I,643717713),a=C(a,c,m,i,l[n+0],b,3921069994),i=C(i,a,c,m,l[n+5],w,3593408605),m=C(m,i,a,c,l[n+10],y,38016083),c=C(c,m,i,a,l[n+15],I,3634488961),a=C(a,c,m,i,l[n+4],b,3889429448),i=C(i,a,c,m,l[n+9],w,568446438),m=C(m,i,a,c,l[n+14],y,3275163606),c=C(c,m,i,a,l[n+3],I,4107603335),a=C(a,c,m,i,l[n+8],b,1163531501),i=C(i,a,c,m,l[n+13],w,2850285829),m=C(m,i,a,c,l[n+2],y,4243563512),c=C(c,m,i,a,l[n+7],I,1735328473),a=C(a,c,m,i,l[n+12],b,2368359562),i=h(i,a,c,m,l[n+5],q,4294588738),m=h(m,i,a,c,l[n+8],L,2272392833),c=h(c,m,i,a,l[n+11],k,1839030562),a=h(a,c,m,i,l[n+14],z,4259657740),i=h(i,a,c,m,l[n+1],q,2763975236),m=h(m,i,a,c,l[n+4],L,1272893353),c=h(c,m,i,a,l[n+7],k,4139469664),a=h(a,c,m,i,l[n+10],z,3200236656),i=h(i,a,c,m,l[n+13],q,681279174),m=h(m,i,a,c,l[n+0],L,3936430074),c=h(c,m,i,a,l[n+3],k,3572445317),a=h(a,c,m,i,l[n+6],z,76029189),i=h(i,a,c,m,l[n+9],q,3654602809),m=h(m,i,a,c,l[n+12],L,3873151461),c=h(c,m,i,a,l[n+15],k,530742520),a=h(a,c,m,i,l[n+2],z,3299628645),i=d(i,a,c,m,l[n+0],B,4096336452),m=d(m,i,a,c,l[n+7],D,1126891415),c=d(c,m,i,a,l[n+14],E,2878612391),a=d(a,c,m,i,l[n+5],F,4237533241),i=d(i,a,c,m,l[n+12],B,1700485571),m=d(m,i,a,c,l[n+3],D,2399980690),c=d(c,m,i,a,l[n+10],E,4293915773),a=d(a,c,m,i,l[n+1],F,2240044497),i=d(i,a,c,m,l[n+8],B,1873313359),m=d(m,i,a,c,l[n+15],D,4264355552),c=d(c,m,i,a,l[n+6],E,2734768916),a=d(a,c,m,i,l[n+13],F,1309151649),i=d(i,a,c,m,l[n+4],B,4149444226),m=d(m,i,a,c,l[n+11],D,3174756917),c=d(c,m,i,a,l[n+2],E,718787259),a=d(a,c,m,i,l[n+9],F,3951481745),i=u(i,t),a=u(a,o),c=u(c,e),m=u(m,f);var G=s(i)+s(a)+s(c)+s(m);return G.toLowerCase()}var e=function(r,n){return r<<n|r>>>32-n},u=function(r,n){var t,o,e,u,f;return e=2147483648&r,u=2147483648&n,t=1073741824&r,o=1073741824&n,f=(1073741823&r)+(1073741823&n),t&o?2147483648^f^e^u:t|o?1073741824&f?3221225472^f^e^u:1073741824^f^e^u:f^e^u},f=function(r,n,t){return r&n|~r&t},i=function(r,n,t){return r&t|n&~t},a=function(r,n,t){return r^n^t},c=function(r,n,t){return n^(r|~t)},g=function(r,n,t,o,i,a,c){return r=u(r,u(u(f(n,t,o),i),c)),u(e(r,a),n)},C=function(r,n,t,o,f,a,c){return r=u(r,u(u(i(n,t,o),f),c)),u(e(r,a),n)},h=function(r,n,t,o,f,i,c){return r=u(r,u(u(a(n,t,o),f),c)),u(e(r,i),n)},d=function(r,n,t,o,f,i,a){return r=u(r,u(u(c(n,t,o),f),a)),u(e(r,i),n)},v=function(r){for(var n,t=r.length,o=t+8,e=(o-o%64)/64,u=16*(e+1),f=Array(u-1),i=0,a=0;t>a;)n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|r.charCodeAt(a)<<i,a++;return n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|128<<i,f[u-2]=t<<3,f[u-1]=t>>>29,f},s=function(r){var n,t,o="",e="";for(t=0;3>=t;t++)n=r>>>8*t&255,e="0"+n.toString(16),o+=e.substr(e.length-2,2);return o},S=function(r){r=r.replace(/\x0d\x0a/g,"\n");for(var n="",t=0;t<r.length;t++){var o=r.charCodeAt(t);128>o?n+=String.fromCharCode(o):o>127&&2048>o?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n};t.exports={init:o}});
;define("question:widget/sma/sma.js",function(a){var s=a("common:widget/js/util/tangram/tangram.js"),t=a("common:widget/js/util/log/log.js");if(s("#wgt-sma").length>0){var e=parseInt(s("#wgt-sma").data("cid"))+2;t.addKey({sma:e}),t.init({area:"sma",query:"#wgt-sma"})}else t.addKey({sma:5})});
;define("question:widget/back-insert/back-insert.js",function(t){var e=t("common:widget/js/util/tangram/tangram.js"),i=t("common:widget/js/util/log/log.js");e("#wgt-back-insert .qb-title").click(function(){try{i.send({type:2014,page:"question",pos:"back_insert_title",action:"click"})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/back-insert/back-insert.js",method:"",ln:7})}}),e("#wgt-back-insert .show-all").click(function(){try{i.send({type:2014,page:"question",pos:"back_insert_all",action:"click"})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"question:widget/back-insert/back-insert.js",method:"",ln:10})}})});